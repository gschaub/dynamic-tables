(()=>{"use strict";var e,t={665:(e,t,l)=>{var o={};l.r(o),l.d(o,{getDeletedTables:()=>W,getTable:()=>O,getTableIdByBlock:()=>L,getTables:()=>D,getUnmountedTables:()=>M,getUnsavedTables:()=>z});var n={};l.r(n),l.d(n,{addColumn:()=>be,addRow:()=>he,assignTableId:()=>ge,createTableEntity:()=>ae,deleteTableEntity:()=>ce,processDeletedTables:()=>de,processUnmountedTables:()=>ue,receiveNewTable:()=>ne,receiveTable:()=>se,removeColumn:()=>me,removeRow:()=>_e,removeTableProp:()=>we,saveTableEntity:()=>re,updateCell:()=>Te,updateColumn:()=>fe,updateRow:()=>xe,updateTableBorder:()=>ve,updateTableEntity:()=>ie,updateTableProp:()=>pe});var s={};l.r(s),l.d(s,{getTable:()=>Ee});const a=window.wp.blocks,r=window.wp.data,i=window.wp.element,c=window.wp.editor,d=window.wp.notices,u=window.wp.i18n,b=window.wp.components,h=window.wp.blockEditor,m=window.wp.primitives,_=window.ReactJSXRuntime,g=(m.SVG,m.Path,(0,_.jsx)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)(m.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})})),p={CREATE_TABLE:"CREATE_TABLE",INSERT_COLUMN:"INSERT_COLUMN",INSERT_ROW:"INSERT_ROW",DELETE_TABLE:"DELETE_TABLE",DELETE_COLUMN:"DELETE_COLUMN",DELETE_ROW:"DELETE_ROW",CHANGE_TABLE_ID:"CHANGE_TABLE_ID",UPDATE_TABLE_PROP:"UPDATE_TABLE_PROP",REMOVE_TABLE_PROP:"REMOVE_TABLE_PROP",UPDATE_ROW:"UPDATE_ROW",UPDATE_COLUMN:"UPDATE_COLUMN",UPDATE_CELL:"UPDATE_CELL",RECEIVE_HYDRATE:"RECEIVE_HYDRATE",RECEIVE_HYDRATE_TEST:"RECEIVE_HYDRATE_TEST",PERSIST:"PERSIST",PROCESS_BORDERS:"PROCESS_BORDERS"};function w(e){const t=[{nbr:"1",letter:"A"},{nbr:"2",letter:"B"},{nbr:"3",letter:"C"},{nbr:"4",letter:"D"},{nbr:"5",letter:"E"},{nbr:"6",letter:"F"},{nbr:"7",letter:"G"},{nbr:"8",letter:"H"},{nbr:"9",letter:"I"},{nbr:"a",letter:"J"},{nbr:"b",letter:"k"},{nbr:"c",letter:"L"},{nbr:"d",letter:"M"},{nbr:"e",letter:"N"},{nbr:"f",letter:"O"},{nbr:"g",letter:"P"},{nbr:"h",letter:"Q"},{nbr:"i",letter:"R"},{nbr:"j",letter:"S"},{nbr:"k",letter:"T"},{nbr:"l",letter:"U"},{nbr:"m",letter:"V"},{nbr:"n",letter:"W"},{nbr:"o",letter:"X"},{nbr:"p",letter:"Y"},{nbr:"q",letter:"Z"}];if(0===e)return"0";const l=e.toString(26).split("");let o="";return l.map((e=>{o+=t.find((t=>t.nbr===e)).letter})),o}function x(e,t,l,o){return e.map((e=>e[t]===l?{...e,...o}:e))}function f(e,t){if("rows"===e){const e=[...t];return e.sort(((e,t)=>Number([e.row_id])<Number([t.row_id])?-1:1)),e}if("columns"===e){const e=[...t];return e.sort(((e,t)=>Number([e.column_id])<Number([t.column_id])?-1:1)),e}if("cells"===e){const e=[...t];return e.sort(((e,t)=>Number([e.row_id])===Number([t.row_id])?Number([e.column_id])<Number([t.column_id])?-1:1:Number([e.row_id])<Number([t.row_id])?-1:1)),e}}function T(e,t,l){return"0"===e&&"0"===t?"":l}function v(e,t,l){return!(!e||t!==l)}const{CREATE_TABLE:E,INSERT_COLUMN:C,INSERT_ROW:y,DELETE_TABLE:N,DELETE_COLUMN:R,DELETE_ROW:S,CHANGE_TABLE_ID:B,UPDATE_TABLE_PROP:j,REMOVE_TABLE_PROP:I,UPDATE_ROW:A,UPDATE_COLUMN:k,UPDATE_CELL:P,RECEIVE_HYDRATE:H,PROCESS_BORDERS:U}=p;function O(e,t,l){return e.tables.hasOwnProperty(t)?e.tables[t]:{table_id:t,block_table_ref:"",post_id:"",table_status:"",table_name:"",attributes:[],classes:"",rows:[],columns:[],cells:[]}}function D(e){return e.tables}function L(e,t){const l=Object.keys(e.tables).reduce(((l,o)=>(e.tables[o]?.block_table_ref===t&&(l[o]={...e.tables[o]}),l)),{});return 0!==l.length&&Object.keys(l)}function M(e){return Object.keys(e.tables).reduce(((t,l)=>(e.tables[l].unmounted_blockid&&(t[l]={...e.tables[l]}),t)),{})}function W(e){return Object.keys(e.tables).reduce(((t,l)=>("deleted"===e.tables[l].table_status&&(t[l]={...e.tables[l]}),t)),{})}function z(e){return Object.keys(e.tables).reduce(((t,l)=>("new"===e.tables[l].table_status&&(t[l]={...e.tables[l]}),t)),{})}const F=window.wp.coreData,{CREATE_TABLE:V,INSERT_COLUMN:G,INSERT_ROW:J,DELETE_TABLE:Y,DELETE_COLUMN:q,DELETE_ROW:X,CHANGE_TABLE_ID:Q,UPDATE_TABLE_PROP:Z,REMOVE_TABLE_PROP:K,UPDATE_ROW:$,UPDATE_COLUMN:ee,UPDATE_CELL:te,RECEIVE_HYDRATE:le,PROCESS_BORDERS:oe}=p;function ne(e){return console.log("Receiving New Table"),console.log(e),console.log(e.table.table_id),{type:V,tableId:e.table.table_id,...e}}function se(e,t,l,o,n,s,a,r,i,c){return console.log("            ...Action - In receiveTable"),console.log("                - id: "+e),console.log("Block Ref = "+t),console.log("Status = "+l),{type:le,tableId:e,table:{table_id:e,block_table_ref:t,table_status:l,post_id:o,table_name:n,attributes:s,classes:a,rows:r,columns:i,cells:c}}}const ae=()=>async({select:e,dispatch:t,registry:l})=>{const{table_id:o,block_table_ref:n,post_id:s,table_name:a,attributes:r,classes:i,rows:c,columns:d,cells:u}=e.getTable("0",!0),b={title:a,header:{id:o,block_table_ref:n,status:"new",post_id:s,table_name:a,attributes:r,classes:i},rows:[...c],columns:[...d],cells:[...u]};console.log("CREATING TABLE ENTITY"),console.log(b);try{const e=await l.dispatch(F.store).saveEntityRecord("dynamic-tables","table",b);return t.assignTableId(e.id),e.id}catch(e){console.log("Error in createTableEntity -  Table ID - "+o+", block table ref = "+n+", Post Id = "+s)}},re=e=>({registry:t})=>{console.log("SAVING TABLE ENTITY");try{t.dispatch(F.store).saveEditedEntityRecord("dynamic-tables","table",e)}catch(t){console.log("Error in saveTableEntity - Table ID - "+e),alert("            ...Save Table Entity - async error - "+t)}},ie=(e,t="")=>({select:l,registry:o})=>{const{table_id:n,block_table_ref:s,table_status:a,post_id:r,table_name:i,attributes:c,classes:d,rows:u,columns:b,cells:h}=l.getTable(e,!1),m=u.filter((e=>"0"!==e.row_id)),_=b.filter((e=>"0"!==e.column_id)),g=h.filter((e=>"0"!==e.row_id&&"0"!==e.column_id)).map((({table_id:e,column_id:t,row_id:l,attributes:o,classes:n,content:s})=>({table_id:e,column_id:t,row_id:l,attributes:o,classes:n,content:s}))),p={id:e,title:i,header:{id:n,block_table_ref:s,status:((e,t)=>e||t)(t,a),post_id:r,table_name:i,attributes:c,classes:d},rows:[...m],columns:[..._],cells:[...g]};console.log("UPDATING TABLE ENTITY"),console.log(p);try{o.dispatch(F.store).editEntityRecord("dynamic-tables","table",n,p)}catch(t){console.log("Error in updateTableEntity - Table ID - "+e),alert("            ...Update Table Entity - async error - "+t)}},ce=e=>async({select:t,dispatch:l,registry:o})=>{console.log("In Action deleteTableEntity");try{await o.dispatch(F.store).deleteEntityRecord("dynamic-tables","table",e),l({type:Y,tableId:e})}catch(t){console.log("Error in deleteTableEntity - Table ID - "+e),alert("            ...Resolver - async error - "+t)}console.log("            Resolver - async completed")},de=e=>({dispatch:t})=>{console.log("In Action processDeletedTables"),Object.keys(e).forEach((l=>{const o=e[l].table_id;console.log(o),t.deleteTableEntity(e[l].table_id)}))},ue=e=>({dispatch:t,registry:l})=>{console.log("In Action processUnmountedTables"),Object.keys(e).forEach((o=>{const n=e[o].unmounted_blockid,s=l.select(h.store).getBlock(n);console.log(s),s?(t.removeTableProp(e[o].table_id,"unmounted_blockid"),t.updateTableProp(e[o].table_id,"table_status")):(t.removeTableProp(e[o].table_id,"unmounted_blockid"),t.updateTableProp(e[o].table_id,"table_status","deleted"))}))},be=(e,t,l,o)=>({type:G,tableId:e,columnId:t,newColumn:l,columnCells:o}),he=(e,t,l,o)=>({type:J,tableId:e,rowId:t,newRow:l,rowCells:o}),me=(e,t)=>({type:q,tableId:e,columnId:t}),_e=(e,t)=>({type:X,tableId:e,rowId:t}),ge=e=>({type:Q,tableId:"0",newTableId:String(e)}),pe=(e,t,l)=>(console.log("In Action updateTableProp"),{type:Z,tableId:e,attribute:t,value:l}),we=(e,t)=>(console.log("In Action removeTableProp"),{type:K,tableId:e,attribute:t}),xe=(e,t,l,o)=>(console.log("In Action updateRow"),{type:$,tableId:e,rowId:t,attribute:l,value:o}),fe=(e,t,l,o)=>(console.log("In Action updateColumn"),{type:ee,tableId:e,columnId:t,attribute:l,value:o}),Te=(e,t,l,o)=>(console.log("In Action updateCell"),{type:te,tableId:e,cellId:t,attribute:l,value:o}),ve=(e,t,l,o)=>async({dispatch:n})=>{console.log("Updating Border"),await n({type:oe,tableId:e,rows:t,columns:l,cells:o})},Ee=(e,t)=>async({dispatch:l,registry:o})=>{if(console.log("            ...Resolver - Before fetch"),console.log("            ...Table ID = "+e),console.log("            ...Table Stale = "+t),t&&"0"!=e)try{const t=await o.resolveSelect(F.store).getEntityRecord("dynamic-tables","table",e),n=t.id,s=t.header.block_table_ref,a=t.header.status,r=t.header.post_id,i=t.header.table_name,c=t.header.attributes,d=t.header.classes,u=t.rows,b=t.columns;t.cells.forEach((e=>{e.cell_id=w(e.column_id)+e.row_id,console.log(e)}));const h=t.cells;l.receiveTable(n,s,a,r,i,c,d,u,b,h)}catch(t){console.log("Error in getTable - Table ID = "+e),alert("            ...Resolver - async error - "+JSON.stringify(t,null,4))}else console.log("Bypassing API Call")},Ce=(0,r.createReduxStore)("dynamic-tables/table",{reducer:(e={tables:{}},t)=>{const l=t.tableId,o=((e={table:{}},t)=>{switch(console.log("      Reducer. state: "+JSON.stringify(e)),console.log("      Reducer. type: "+t.type),t.type){case E:return{table:{...t.table}};case B:console.log("In Reducer CHANGE_TABLE_ID");const l={...e},o=[],n=[],s=[];console.log(l.rows),l.rows.forEach((e=>{console.log(e);const l={...e,table_id:t.newTableId};o.push(l)})),l.columns.forEach((e=>{const l={...e,table_id:t.newTableId};n.push(l)})),l.cells.forEach((e=>{const l={...e,table_id:t.newTableId};s.push(l)}));const a={...e,table_id:t.newTableId,rows:[...o],columns:[...n],cells:[...s]};return console.log(a),{table:a};case j:console.log("In Reducer UPDATE_TABLE_PROP");const r={...e,[t.attribute]:t.value};return console.log(r),{table:r};case I:const i={...e};return delete i[t.attribute],{table:i};case C:console.log("In Reducer INSERT_COLUMN");const c={...e},d=[];c.columns.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))d.push(e);else{const t={table_id:e.table_id,column_id:String(Number(e.column_id)+1),column_name:e.column_name,attributes:e.attributes,classes:e.classes};d.push(t)}})),d.push(t.newColumn);const u=f("columns",d),b=[];c.cells.forEach((e=>{if(e.column_id<t.columnId)b.push(e);else{const t=String(Number(e.column_id)+1),l=w(t),o=0==Number(e.row_id)?l:e.content,n={table_id:e.table_id,column_id:t,row_id:e.row_id,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:o};b.push(n)}}));const h=f("cells",[...b,...t.columnCells]),m={...c,rows:[...c.rows],columns:[...u],cells:[...h]};return console.log(m),{table:m};case y:console.log("In Reducer INSERT_ROW");const _={...e};console.log(_);const g=[];_.rows.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))g.push(e);else{const t={table_id:e.table_id,row_id:String(Number(e.row_id)+1),attributes:e.attributes,classes:e.classes};g.push(t)}})),g.push(t.newRow),console.log(g);const p=f("rows",g);console.log(p);const T=[];_.cells.forEach((e=>{if(console.log(e),Number(e.row_id)<Number(t.rowId))T.push(e);else{const t=String(Number(e.row_id)+1),l="0"==e.column_id?"0":w(e.column_id),o=0==Number(e.column_id)?t:e.content,n={table_id:e.table_id,column_id:e.column_id,row_id:t,cell_id:l+t,attributes:e.attributes,classes:e.classes,content:o};T.push(n)}}));const v=f("cells",[...T,...t.rowCells]);return{table:{..._,rows:[...p],columns:[..._.columns],cells:[...v]}};case R:console.log("In Reducer DELETE_COLUMN");const N={...e},O=[];N.columns.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))O.push(e);else if(Number(e.column_id)>Number(t.columnId)){const t={table_id:e.table_id,column_id:String(Number(e.column_id)-1),column_name:e.column_name,attributes:e.attributes,classes:e.classes};O.push(t)}}));const D=[];N.cells.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))D.push(e);else if(Number(e.column_id)>Number(t.columnId)){const t=String(Number(e.column_id)-1),l=w(t),o=0==Number(e.row_id)?l:e.content,n={table_id:e.table_id,column_id:t,row_id:e.row_id,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:o};D.push(n)}}));const L={...N,rows:[...N.rows],columns:[...O],cells:[...D]};return console.log(L),{table:L};case S:console.log("In Reducer DELETE_ROW");const M={...e},W=[];console.log(M),M.rows.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))W.push(e);else if(Number(e.row_id)>Number(t.rowId)){const t={table_id:e.table_id,row_id:String(Number(e.row_id)-1),attributes:e.attributes,classes:e.classes};W.push(t)}}));const z=[];console.log(M.cells),M.cells.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))z.push(e);else if(Number(e.row_id)>Number(t.rowId)){const t=String(Number(e.row_id)-1),l="0"==e.column_id?"0":w(e.column_id),o=0==Number(e.column_id)?t:e.content,n={table_id:e.table_id,column_id:e.column_id,row_id:t,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:o};z.push(n)}}));const F={...M,rows:[...W],columns:[...M.columns],cells:[...z]};return console.log(F),{table:F};case A:console.log("In Reducer UPDATE_ROW");let V=' "'+t.value+'"';"attributes"===t.attribute&&(V=JSON.stringify(t.value)),console.log();const G={...e},J=JSON.parse('{ "'+t.attribute+'" :'+V+"}");console.log(G),console.log(G.rows);const Y=x(G.rows,"row_id",t.rowId,J);return console.log(J),console.log(Y),{table:{...G,rows:[...Y],columns:[...G.columns],cells:[...G.cells]}};case k:console.log("In Reducer UPDATE_COLUMN");let q=' "'+t.value+'"';"attributes"===t.attribute&&(q=JSON.stringify(t.value)),console.log(q);const X={...e},Q=JSON.parse('{ "'+t.attribute+'" :'+q+"}");console.log(X),console.log(X.columns);const Z=x(X.columns,"column_id",t.columnId,Q);return console.log(Q),console.log(Z),{table:{...X,rows:[...X.rows],columns:[...Z],cells:[...X.cells]}};case P:console.log("In Reducer UPDATE_CELL");const K={...e};console.log(e),console.log(K);const $=JSON.parse('{ "'+t.attribute+'" : "'+t.value+'"}'),ee=x(K.cells,"cell_id",t.cellId,$),te={...e,rows:[...K.rows],columns:[...K.columns],cells:[...ee]};return console.log(te),{table:te};case U:console.log("In Reducer PROCESS_BORDERS");const le={...e},oe={...le,rows:f("rows",[...t.rows]),columns:f("columns",[...t.columns]),cells:f("cells",[...t.cells])};return console.log(le),console.log(oe),{table:oe};case H:return console.log("RECEIVE_HYDATE..."),console.log(e),console.log(t.table),{table:{...e.table,...t.table}};default:return e}})(e.tables[l],t);if("{}"===JSON.stringify(o.table))return e;const n={...e.tables};switch(t.type){case B:console.log("In Reducer CHANGE_TABLE_ID for state");const l={[t.newTableId]:o.table};console.log(l);const s=Object.keys(e.tables).reduce(((l,o)=>(console.log(e.tables[o]),e.tables[o].table_id!==t.tableId&&(l[o]={...e.tables[o]}),l)),{});return console.log(s),{tables:{...s,...l}};case N:console.log("In Reducer DELETE_TABLE...");const a=Object.keys(e.tables).reduce(((l,o)=>(console.log("Reducer key = "+o),console.log("TableId to delete = "+String(t.tableId)),console.log(l),o!==String(t.tableId)&&(l[o]={...e.tables[o],rows:[...e.tables[o].rows],columns:[...e.tables[o].columns],cells:[...e.tables[o].cells]}),l)),{});return console.log(a),{tables:{...a}};default:return console.log("In Reducer Default State Handling"),{tables:{...n,[t.tableId]:o.table}}}},selectors:o,actions:n,resolvers:s});(0,r.register)(Ce);const ye=window.wp.compose;function Ne(e,t,l="Body"){let o;return o={table_id:String(e),row_id:String(t),attributes:Be("rows",l),classes:je("rows")},o}function Re(e,t,l="Body"){let o;return o="Border"===l?{table_id:String(e),column_id:String(t),column_name:"Border",attributes:Be("columns",l),classes:""}:{table_id:String(e),column_id:String(t),column_name:"Comments",attributes:Be("columns",l),classes:je("columns")},o}function Se(e,t,l,o="Body"){let n;const s=w(t),a=0==l?s:String(l);return n="Border"===o?{table_id:String(e),column_id:String(t),row_id:String(l),cell_id:0===l?s+"0":"0"+String(t),attributes:Be("cells",o),classes:"grid-control__border-cells hover",content:a}:{table_id:String(e),column_id:String(t),row_id:String(l),cell_id:s+l,attributes:Be("cells",o),classes:je("cells"),content:""},n}function Be(e,t="Body"){const l={showGridLines:!0,bandedRows:!1,bandedRowBackgroundColor:"#d8dbda",bandedTextColor:"#d8dbda",gridLineWidth:1,allowHorizontalScroll:!0,enableHeaderRow:!1,headerAlignment:"center",headerRowSticky:!1,headerBorder:{color:"black",style:"solid",width:"1px"},horizontalAlignment:"none",bodyAlignment:void 0,bodyBorder:{color:"black",style:"solid",width:"1px"},verticalAlignment:"none",hideTitle:!0},o={columnWidthType:"Proportional",minWidth:2,minWidthUnits:"ch",maxWidth:1,maxWidthUnits:"fr",fixedWidth:1,fixedWidthUnits:"fr",disableForTablet:!1,disableForPhone:!1,isFixedLeftColumnGroup:!1,horizontalAlignment:"none"},n={columnWidthType:"Fixed",minWidth:0,minWidthUnits:"",maxWidth:0,maxWidthUnits:"",fixedWidth:20,fixedWidthUnits:"px",disableForTablet:!1,disableForPhone:!1,isFixedLeftColumnGroup:!1,horizontalAlignment:"center"},s={rowHeightType:"Auto",minHeight:0,minHeightUnits:"em",maxHeight:0,maxHeightUnits:"em",fixedHeight:0,fixedHeightUnits:"em",isHeader:!1,verticalAlignment:"none"},a={rowHeightType:"Auto",minHeight:0,minHeightUnits:"em",maxHeight:0,maxHeightUnits:"em",fixedHeight:0,fixedHeightUnits:"em",isHeader:!1,verticalAlignment:"none"},r={border:!1},i={border:!0};switch(e){case"table":return l;case"columns":return"Border"===t?n:o;case"rows":return"Border"===t?a:s;case"cells":return"Border"===t?i:r}}function je(e){switch(e){case"table":case"columns":case"rows":case"cells":return""}}function Ie(e,t,l,o,n,s){let a;switch(t){case"Header":a=2,a=n?a++:a;break;case"Body":a=e+l,a=n?a++:a,a=o?a-1:a,a=s?a-1:a;break;default:console.log("Unknown row type")}return a}function Ae(e,t,l){if(!e&&!t)return l}function ke(e){if(e){const t=Object.entries(e);for(let e=0;e<t.length;e++)if(t[e].some((e=>"object"==typeof e)))return"split";return"flat"}return"unknown"}function Pe(e,t,l,o){switch(o){case"split":return e[t][l];case"flat":return e[l];default:switch(l){case"color":return"black";case"style":return"solid";case"width":return"1px"}}}const He=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(m.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})}),Ue=(0,_.jsxs)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,_.jsx)(m.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,_.jsx)(m.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]}),Oe=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.4 3.776v3.648H2.752v1.792H6.4v3.648h1.728V9.216h3.712V7.424H8.128V3.776zM0 17.92V0h20.48v17.92H0zM12.8 1.28H1.28v14.08H12.8V1.28zm6.4 0h-5.12v3.84h5.12V1.28zm0 5.12h-5.12v3.84h5.12V6.4zm0 5.12h-5.12v3.84h5.12v-3.84z"})}),De=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.4 9.98L7.68 8.7v-.256L6.4 7.164V9.98zm6.4-1.532l1.28-1.28V9.92L12.8 8.64v-.192zm7.68 9.472V0H0v17.92h20.48zm-1.28-2.56h-5.12v-1.024l-.256.256-1.024-1.024v1.792H7.68v-1.792l-1.024 1.024-.256-.256v1.024H1.28V1.28H6.4v2.368l.704-.704.576.576V1.216h5.12V3.52l.96-.96.32.32V1.216h5.12V15.36zm-5.76-2.112l-3.136-3.136-3.264 3.264-1.536-1.536 3.264-3.264L5.632 5.44l1.536-1.536 3.136 3.136 3.2-3.2 1.536 1.536-3.2 3.2 3.136 3.136-1.536 1.536z"})});function Le(e){const{openColumnWidth:t,columnLabel:l,columnAttributes:o,enableProFeatures:n}=e;function s(e){t(!1)}(0,i.useEffect)((()=>{switch(o.columnWidthType){case"Proportional":d(!1),h(!0),g(!0);break;case"Auto":d(!0),h(!0),g(!0);break;case"Fixed":d(!0),h(!0),g(!1);break;case"Custom":d(!0),h(!1),g(!0)}r(o.columnWidthType),w(o.minWidth),f(o.minWidthUnits),v(o.maxWidth),C(o.maxWidthUnits),N(o.fixedWidth),S(o.fixedWidth),A(o.disableForPhone),j(o.disableForTablet)}),[o]);const[a,r]=(0,i.useState)(),[c,d]=(0,i.useState)(!0),[u,h]=(0,i.useState)(!0),[m,g]=(0,i.useState)(!0),[p,w]=(0,i.useState)(0),[x,f]=(0,i.useState)(),[T,v]=(0,i.useState)(1),[E,C]=(0,i.useState)(),[y,N]=(0,i.useState)(0),[R,S]=(0,i.useState)(),[B,j]=(0,i.useState)(!1),[I,A]=(0,i.useState)(!1);function k(e){w(e.target.value)}function P(e){f(e)}function H(e){v(e.target.value)}return(0,_.jsx)(_.Fragment,{children:t&&(0,_.jsxs)(b.Modal,{title:"Configure Column Width",onRequestClose:s,focusOnMount:"firstContentElement",isDismissible:"false",shouldCloseOnClickOutside:"false",size:"large",children:[(0,_.jsxs)("p",{className:"column-label",children:["For column ",l]}),(0,_.jsxs)("form",{onSubmit:function(e){const l={columnWidthType:a,minWidth:p,minWidthUnits:x,maxWidth:Number(T),maxWidthUnits:E,fixedWidth:y,fixedWidthUnits:R,disableForTablet:B,disableForPhone:I,isFixedLeftColumnGroup:!1,horizontalAlignment:"none"};t(!1,l)},onMouseDown:function(e){e.stopPropagation()},children:[(0,_.jsx)(b.SelectControl,{label:"Width Type",value:a,onChange:e=>function(e){switch(e){case"Proportional":v(1),C("fr"),w(20),f("ch"),N(0),S("px"),d(!1),h(!0),g(!0);break;case"Auto":v(0),C("fr"),w(0),f("ch"),N(0),S("px"),d(!0),h(!0),g(!0);break;case"Fixed":v(0),C("fr"),w(0),f("ch"),N(40),S("px"),d(!0),h(!0),g(!1);break;case"Custom":v(40),C("ch"),w(20),f("ch"),N(0),S("px"),d(!0),h(!1),g(!0)}r(e)}(e),options:[{value:"Proportional",label:"Proportional"},{value:"Auto",label:"Automatic"},{value:"Fixed",label:"Fixed width"},{value:"Custom",label:"Custom"}],__nextHasNoMarginBottom:!0}),(0,_.jsxs)("fieldset",{className:!0===c?" column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Proportional Width"}),(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-value-input",label:"Number of portions",labelPosition:"side",onBlur:e=>H(e),value:T}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-value-input",label:"Minimum width",labelPosition:"left",value:p,onBlur:e=>k(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:x,onChange:e=>P(e),options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===m?"column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Fixed Width"}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Fixed width",labelPosition:"left",value:y,onBlur:e=>{N(Number(e.target.value))}}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",label:"Units",labelPosition:"left",value:R,onChange:e=>{S(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"font"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===u?"column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Custom Width"}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Minimum width",labelPosition:"left",value:p,onBlur:e=>k(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:x,onChange:e=>P(e),options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Maximum width",labelPosition:"left",value:T,onBlur:e=>H(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:E,onChange:e=>{C(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),n&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.CheckboxControl,{label:"Hide for tablet",checked:B,onChange:function(e){j(e)}}),(0,_.jsx)(b.CheckboxControl,{label:"Hide for phone",checked:I,onChange:function(e){A(e)}})]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(b.Button,{variant:"secondary",onClick:s,children:"Cancel"}),(0,_.jsx)(b.Button,{variant:"primary",type:"submit",children:"Update"})]})]})]})})}function Me(e){const[t,l]=(0,i.useState)(!1),[o,n]=(0,i.useState)({}),{tableId:s,columnId:a,columnLabel:r,enableProFeatures:c,updatedColumn:d}=e;function u(e,o){t?(l(!1),d(e,"attributes",s,a,o)):(e.preventDefault(),l(!0))}return(0,i.useEffect)((()=>{n(e.columnAttributes)}),[e.columnAttributes]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.DropdownMenu,{icon:He,defaultOpen:"true",label:r,children:({onClose:e})=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.MenuGroup,{children:(0,_.jsx)(b.MenuItem,{icon:Ue,onClick:u,children:"Update Column Width"})}),(0,_.jsxs)(b.MenuGroup,{children:[(0,_.jsx)(b.MenuItem,{icon:Oe,onClick:e=>function(e,t){d(e,"insert",s,t,"")}(e,a),children:"Insert Column"}),(0,_.jsx)(b.MenuItem,{icon:De,onClick:e=>function(e,t){d(e,"delete",s,t,"")}(e,a),children:"Delete Column"})]})]})}),t&&(0,_.jsx)(Le,{columnId:a,columnLabel:r,columnAttributes:o,enableProFeatures:c,openColumnWidth:u})]})}const We=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.656 6.464h2.88v2.88h1.408v-2.88h2.88V5.12h-2.88V2.24H9.536v2.88h-2.88zM0 17.92V0h20.48v17.92H0zm7.68-2.56h5.12v-3.84H7.68v3.84zm-6.4 0H6.4v-3.84H1.28v3.84zM19.2 1.28H1.28v9.024H19.2V1.28zm0 10.24h-5.12v3.84h5.12v-3.84zM6.656 6.464h2.88v2.88h1.408v-2.88h2.88V5.12h-2.88V2.24H9.536v2.88h-2.88zM0 17.92V0h20.48v17.92H0zm7.68-2.56h5.12v-3.84H7.68v3.84zm-6.4 0H6.4v-3.84H1.28v3.84zM19.2 1.28H1.28v9.024H19.2V1.28zm0 10.24h-5.12v3.84h5.12v-3.84z"})}),ze=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M17.728 11.456L14.592 8.32l3.2-3.2-1.536-1.536-3.2 3.2L9.92 3.648 8.384 5.12l3.2 3.2-3.264 3.264 1.536 1.536 3.264-3.264 3.136 3.136 1.472-1.536zM0 17.92V0h20.48v17.92H0zm19.2-6.4h-.448l-1.28-1.28H19.2V6.4h-1.792l1.28-1.28h.512V1.28H1.28v3.84h6.208l1.28 1.28H1.28v3.84h7.424l-1.28 1.28H1.28v3.84H19.2v-3.84z"})});function Fe(e){const{openRowHeight:t,rowLabel:l,rowAttributes:o}=e;function n(e){t(!1)}(0,i.useEffect)((()=>{switch(o.rowHeightType){case"Auto":c(!0),u(!0);break;case"Fixed":c(!0),u(!1);break;case"Custom":c(!1),u(!0)}a(o.rowHeightType),m(o.minHeight),p(o.minHeightUnits),x(o.maxHeight),T(o.maxHeightUnits),E(o.fixedHeight),y(o.fixedHeightUnits)}),[o]);const[s,a]=(0,i.useState)(),[r,c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(!0),[h,m]=(0,i.useState)(0),[g,p]=(0,i.useState)(),[w,x]=(0,i.useState)(1),[f,T]=(0,i.useState)(),[v,E]=(0,i.useState)(0),[C,y]=(0,i.useState)();return(0,_.jsx)(_.Fragment,{children:t&&(0,_.jsxs)(b.Modal,{title:"Configure Row Height",onRequestClose:n,focusOnMount:"firstContentElement",isDismissible:"false",shouldCloseOnClickOutside:"false",size:"large",children:[(0,_.jsxs)("p",{className:"row-label",children:["For row ",l]}),(0,_.jsxs)("form",{onSubmit:function(e){const l={rowHeightType:s,minHeight:h,minHeightUnits:g,maxHeight:Number(w),maxHeightUnits:f,fixedHeight:v,fixedHeightUnits:C,isFixedLeftRowGroup:!1,horizontalAlignment:"none"};t(!1,l)},onMouseDown:function(e){e.stopPropagation()},children:[(0,_.jsx)(b.SelectControl,{label:"Height Type",value:s,onChange:e=>function(e){switch(e){case"Auto":x(0),T("fr"),m(0),p("ch"),E(0),y("px"),c(!0),u(!0);break;case"Fixed":x(0),T("fr"),m(0),p("ch"),E(40),y("px"),c(!0),u(!1);break;case"Custom":x(40),T("ch"),m(20),p("ch"),E(0),y("px"),c(!1),u(!0)}a(e)}(e),options:[{value:"Auto",label:"Automatic"},{value:"Fixed",label:"Fixed height"},{value:"Custom",label:"Custom"}],__nextHasNoMarginBottom:!0}),(0,_.jsxs)("fieldset",{className:!0===d?"row-height--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Fixed Height"}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Fixed height",labelPosition:"left",value:v,onBlur:e=>{E(Number(e.target.value))}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",label:"Units",labelPosition:"left",value:C,onChange:e=>{y(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"font"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===r?"row-height--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Custom Height"}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Minimum height",labelPosition:"left",value:h,onBlur:e=>{m(e.target.value)}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",labelPosition:"left",label:"Units",value:g,onChange:e=>{p(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Maximum height",labelPosition:"left",value:w,onBlur:e=>{x(e.target.value)}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",labelPosition:"left",label:"Units",value:f,onChange:e=>{T(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(b.Button,{variant:"secondary",onClick:n,children:"Cancel"}),(0,_.jsx)(b.Button,{variant:"primary",type:"submit",children:"Update"})]})]})]})})}function Ve(e){const[t,l]=(0,i.useState)(!1),[o,n]=(0,i.useState)({}),{tableId:s,rowId:a,rowLabel:r,updatedRow:c}=e;function d(e,o){t?(l(!1),c(e,"attributes",s,a,o)):(e.preventDefault(),l(!0))}return(0,i.useEffect)((()=>{n(e.rowAttributes)}),[e.rowAttributes]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.DropdownMenu,{icon:He,defaultOpen:"true",label:r,children:({onClose:e})=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.MenuGroup,{children:(0,_.jsx)(b.MenuItem,{icon:Ue,onClick:d,children:"Update Row Height"})}),(0,_.jsxs)(b.MenuGroup,{children:[(0,_.jsx)(b.MenuItem,{icon:We,onClick:e=>function(e,t){c(e,"insert",s,t,"")}(e,a),children:"Insert Row"}),(0,_.jsx)(b.MenuItem,{icon:ze,onClick:e=>function(e,t){c(e,"delete",s,t,"")}(e,a),children:"Delete Row"})]})]})}),t&&(0,_.jsx)(Fe,{rowId:a,rowLabel:r,rowAttributes:o,openRowHeight:d})]})}(0,r.dispatch)("core").addEntities([{name:"table",kind:"dynamic-tables",baseURL:"/dynamic-tables/v1/tables",baseURLParams:{context:"edit"},plural:"tables",label:(0,u.__)("Table"),getTitle:e=>e?.title||(0,u.__)("Unnamed Table")}]);const Ge=JSON.parse('{"UU":"dynamic-tables/dynamic-tables"}');console.log(Ge.UU),(0,a.registerBlockType)(Ge.UU,{apiVersion:3,edit:function(e){const t=(0,h.useBlockProps)({className:"dynamic-table-edit-block"}),{lockPostSaving:l}=(0,r.useDispatch)(c.store),{lockPostAutosaving:o}=(0,r.useDispatch)(c.store),{receiveNewTable:n}=(0,r.useDispatch)(Ce),{createTableEntity:s}=(0,r.useDispatch)(Ce),{saveTableEntity:a}=(0,r.useDispatch)(Ce),{addColumn:m}=(0,r.useDispatch)(Ce),{addRow:p}=(0,r.useDispatch)(Ce),{removeColumn:w}=(0,r.useDispatch)(Ce),{removeRow:x}=(0,r.useDispatch)(Ce),{updateTableProp:E}=(0,r.useDispatch)(Ce),{updateRow:C}=(0,r.useDispatch)(Ce),{updateColumn:y}=(0,r.useDispatch)(Ce),{updateCell:N}=(0,r.useDispatch)(Ce),{updateTableEntity:R}=(0,r.useDispatch)(Ce),{updateTableBorder:S}=(0,r.useDispatch)(Ce),{processUnmountedTables:B}=(0,r.useDispatch)(Ce),{processDeletedTables:j}=(0,r.useDispatch)(Ce),{createNotice:I,removeNotice:A}=(0,r.useDispatch)(d.store),[k,P]=(0,i.useState)(!0),[H,U]=(0,i.useState)(0),[O,D]=(0,i.useState)({}),[L,M]=(0,i.useState)(!1),[W,z]=(0,i.useState)(!1),[F,V]=(0,i.useState)({}),[G,J]=(0,i.useState)(!1),[Y,q]=(0,i.useState)(""),[X,Q]=(0,i.useState)(1),[Z,K]=(0,i.useState)(1),[$,ee]=(0,i.useState)(!1),te=!1,{table_id:le,block_table_ref:oe,block_alignment:ne}=e.attributes,se=(0,h.useSettings)("color.palette"),ae=se[0].map((({color:e,name:t})=>({color:e,name:t}))),{currentTableId:re}=(0,r.useSelect)((e=>{const{getTableIdByBlock:t}=e(Ce);return{currentTableId:t(oe)}})),ie=!(!$||Number(re)===Number(le)),{unmountedTables:ce}=(0,r.useSelect)((e=>{const{getUnmountedTables:t}=e(Ce);return{unmountedTables:t()}}));Object.keys(ce).length>0&&B(ce);const{deletedTables:de}=(0,r.useSelect)((e=>{const{getDeletedTables:t}=e(Ce);return{deletedTables:t()}})),ue=(()=>{const[e,t]=(0,i.useState)(!1),{hasUnsavedChanges:l}=(0,r.useSelect)((e=>({hasUnsavedChanges:e("core/editor").isEditedPostDirty()}))),o=(0,ye.usePrevious)(l);return(0,i.useEffect)((()=>{!l&&o&&t(!0),l&&t(!1)}),[l,o]),e})();(0,i.useEffect)((()=>{ue&&(Object.keys(de).length>0&&j(de),"new"==me.table_status&&(Xe(me.table_id,"table_status","","PROP","saved"),a(me.table_id)))}),[ue,ce]);const be=""===oe,he=""===oe?"None":"0"===le?"New":k?"Stale":"Saved";be&&(l("lockPostSaving"),o("lockPostAutosaving"));const{table:me,tableStatus:_e,tableHasStartedResolving:ge,tableHasFinishedResolving:pe,tableIsResolving:we}=(0,r.useSelect)((t=>{const{getTable:n,getTableIdByBlock:s,hasStartedResolution:a,hasFinishedResolution:r,isResolving:i}=t(Ce),c=[le,k];if(""===oe)return{table:{},tableStatus:"",tableHasStartedResolving:!1,tableHasFinishedResolving:!1,tableIsResolving:!1};const d=((t,a,r)=>{let i=n(t,a);if("0"===t&&""===i.block_table_ref&&$){const t=s(r);i=n(t,a),String(e.context.postId)!==i.post_id&&"0"!==String(e.context.postId)&&Xe(i.table_id,"post_id","","PROP",String(e.context.postId)),ee(!1),l("unlockPostSaving"),o("unlockPostAutosaving"),e.setAttributes({table_id:Number(i.table_id)})}return i})(le,k,oe),u=a("getTable",c),b=r("getTable",c),h=i("getTable",c);return b&&P((()=>!1)),{table:d,tableStatus:d.table_status,tableHasStartedResolving:u,tableHasFinishedResolving:b,tableIsResolving:h}}),[le,ie,k,oe]);function xe(e,t){const l=e?.[t];return l}const fe=xe(me.attributes,"showGridLines"),Te=xe(me.attributes,"allowHorizontalScroll"),ve=xe(me.attributes,"enableHeaderRow"),Ee=xe(me.attributes,"headerAlignment"),He=(xe(me.attributes,"tableHeaderBackgroundColor"),xe(me.attributes,"headerRowSticky")),Ue=xe(me.attributes,"headerBorder"),Oe=xe(me.attributes,"bodyAlignment"),De=xe(me.attributes,"bodyBorder"),Le=xe(me.attributes,"bandedRows"),We=xe(me.attributes,"bandedTextColor"),ze=xe(me.attributes,"bandedRowBackgroundColor"),Fe=xe(me.attributes,"gridLineWidth"),Ge=ne,Je=(xe(me.attributes,"horizontalAlignment"),xe(me.attributes,"verticalAlignment"),xe(me.attributes,"hideTitle"));ge&&pe&&!$&&String(e.context.postId)!==me.post_id&&(Xe(me.table_id,"post_id","","PROP",String(e.context.postId)),a(me.table_id)),(0,i.useEffect)((()=>()=>{Xe(me.table_id,"unmounted_blockid","","PROP",t["data-block"],!1)}),[]);const Ye="{}"===JSON.stringify(me.table)||"None"==he?0:me.columns.length,qe="{}"===JSON.stringify(me.table)||"None"==he?0:me.rows.length;function Xe(e,t,l,o,n,s=!0){switch(o){case"CONTENT":"cell"===t&&N(e,l,"content",n);break;case"ATTRIBUTES":"cell"===t?N(e,l,"attributes",n):"row"===t?(V(n),C(e,l,"attributes",n)):"column"===t?(D(n),y(e,l,"attributes",n)):"table"===t&&E(e,"attributes",n);break;case"CLASSES":"cell"===t?N(e,l,"classes",n):"column"===t&&y(e,l,"classes",n);break;case"PROP":E(e,t,n),"unmounted_blockid"===t&&R(e,"unknown");break;default:console.log("Unrecognized Attibute Type")}if(P(!1),s)return R(e)}function Qe(t,l,o){P(!1);const a=Date.now().toString(16),r=function(e,t,l,o){const n=function(e,t){const l=[];let o=1,n=1;for(;n<=t;){for(;o<=e;){if(1==n){const e=Se("0",String(o),String(n));l.push(e)}else{const e=Se("0",String(o),String(n));l.push(e)}o++}o=1,n++}return l}(Number(t),Number(l)),s=[];for(let e=1;e<=l;e++){const t=Ne("0",e);s.push(t)}const a=[];for(let e=1;e<=t;e++){const t=Re("0",e);a.push(t)}return{table:{table_id:"0",block_table_ref:e,post_id:"0",table_status:"new",table_name:o,attributes:Be("table"),classes:je("table"),rows:s,columns:a,cells:n}}}(a,t,l,o);e.setAttributes({block_table_ref:a}),n(r),ee(!0),s()}function Ze(e,t,l,o,n){switch(t){case"attributes":Xe(l,"column",o,"ATTRIBUTES",n);break;case"insert":U(0),M(!1),function(e,t){const l=Re(e,t),o=[];for(let l=0;l<Z;l++)if(0===l){const n=Se(e,t,l,"Border");o.push(n)}else{const n=Se(e,t,l);o.push(n)}m(e,t,l,o),P(!1),R(e)}(l,o);break;case"delete":U(0),M(!1),function(e,t){w(e,t),P(!1),R(e)}(l,o);break;default:console.log("Unrecognized Column Update Type")}}function Ke(e,t,l,o,n){switch(t){case"attributes":Xe(l,"row",o,"ATTRIBUTES",n);break;case"insert":U(0),z(!1),function(e,t){const l=Ne(e,t),o=[];for(let l=0;l<X;l++)if(0===l){const n=Se(e,l,t,"Border");o.push(n)}else{const n=Se(e,l,t);o.push(n)}p(e,t,l,o),P(!1),R(e)}(l,o);break;case"delete":U(0),z(!1),function(e,t){x(e,t),P(!1),R(e)}(l,o);break;default:console.log("Unrecognized Row Update Type")}}function $e(e,t,l){if("0"===t&&"0"!==e){const t=e,o=l.columns.find((({column_id:e})=>e===t));D(o.attributes),M(!0),U(e)}if("0"!==t&&"0"===e){const e=t,o=l.rows.find((({row_id:t})=>t===e));V(o.attributes),z(!0),U(t)}P(!1)}function et(e,t,l){let o="";"background"==t&&(o={...e.attributes,bandedRowBackgroundColor:l},Xe(e.table_id,"table","","ATTRIBUTES",o)),"text"==t&&(o={...e.attributes,bandedTextColor:l},Xe(e.table_id,"table","","ATTRIBUTES",o))}(0,i.useEffect)((()=>{be||(Ye!=X&&Q(Ye),qe!=Z&&K(qe))}),[Ye,qe]);const tt=function(e,t,l,o){if(e||t)return;let n="";return o.map((({column_id:e,column_name:t,attributes:l,classes:o})=>{const{columnWidthType:s,minWidth:a,minWidthUnits:r,maxWidth:i,maxWidthUnits:c,fixedWidth:d,fixedWidthUnits:u,disableForTablet:b,disableForPhone:h}=l;let m="";switch(s){case"Proportional":m=a>0?"minmax("+a+r+", "+i+"fr) ":i+"fr ",n+=m;break;case"Auto":n+="auto ";break;case"Fixed":n=n+d+u+" ";break;case"Custom":m="minmax("+a+r+", "+i+c+") ",n+=m;break;default:console.log("Unrecognized Attibute Type")}})),n}(be,we,0,me.columns),lt=function(e,t,l){if(e||t)return;let o="";return l.map((({row_id:e,attributes:t,classes:l})=>{const{rowHeightType:n,minHeight:s,minHeightUnits:a,maxHeight:r,maxHeightUnits:i,fixedHeight:c,fixedHeightUnits:d,isHeader:u}=t;let b="";if(u)switch(n){case"Auto":o+="auto ";break;case"Fixed":o=o+c+d+" ";break;case"Custom":b="minmax("+s+a+", "+r+i+") ",o+=b;break;default:console.log("Unrecognized Attibute Type")}})),o}(be,we,me.rows),ot=function(e,t,l){if(e||t)return;let o="";return l.map((({row_id:e,attributes:t,classes:l})=>{const{rowHeightType:n,minHeight:s,minHeightUnits:a,maxHeight:r,maxHeightUnits:i,fixedHeight:c,fixedHeightUnits:d,isHeader:u}=t;let b="";if(!u)switch(n){case"Auto":o+="auto ";break;case"Fixed":o=o+c+d+" ";break;case"Custom":b="minmax("+s+a+", "+r+i+") ",o+=b;break;default:console.log("Unrecognized Attibute Type")}})),o}(be,we,me.rows),nt=G?2:1,st=Ie(1,"Header",Z,ve,G,!1),at=function(e,t){let l=1;return l=e?l+1:l,l=t?l+1:l,l}(ve,G),rt=Ie(at,"Body",Z,ve,G,!1),it=Te?"auto":"hidden",ct=function(e,t,l){if(!e&&!t)return l}(be,we,We),dt=function(e,t,l){if(!e&&!t)return l}(be,we,ze),ut=function(e,t,l){if(!e&&!t)return l?"solid":"hidden"}(be,we,fe),bt=function(e,t,l,o){if(!e&&!t)return l?String(o)+"px":"0px"}(be,we,fe,Fe),ht=He?"auto":"hidden",mt=He?"grid-control__header--sticky ":"",_t=(t.style.backgroundColor,Ae(be,we,Ee)),gt=ke(Ue),pt=Pe(Ue,"top","color",gt),wt=Pe(Ue,"top","style",gt),xt=Pe(Ue,"top","width",gt),ft=Pe(Ue,"right","color",gt),Tt=Pe(Ue,"right","style",gt),vt=Pe(Ue,"right","width",gt),Et=Pe(Ue,"bottom","color",gt),Ct=Pe(Ue,"bottom","style",gt),yt=Pe(Ue,"bottom","width",gt),Nt=Pe(Ue,"left","color",gt),Rt=Pe(Ue,"left","style",gt),St=Pe(Ue,"left","width",gt),Bt=Ae(be,we,Oe),jt=ke(De),It=Pe(De,"top","color",jt),At=Pe(De,"top","style",jt),kt=Pe(De,"top","width",jt),Pt=Pe(De,"right","color",jt),Ht=Pe(De,"right","style",jt),Ut=Pe(De,"right","width",jt),Ot=Pe(De,"bottom","color",jt),Dt=Pe(De,"bottom","style",jt),Lt=Pe(De,"bottom","width",jt),Mt=Pe(De,"left","color",jt),Wt=Pe(De,"left","style",jt),zt=Pe(De,"left","width",jt);return(0,_.jsxs)("div",{...t,children:[!be&&!we&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(h.BlockControls,{children:(0,_.jsx)(h.BlockAlignmentToolbar,{value:ne,onChange:t=>e.setAttributes({block_alignment:t})})}),(0,_.jsx)(h.InspectorControls,{children:(0,_.jsxs)(b.Panel,{children:[(0,_.jsxs)(b.PanelBody,{title:"Definition",initialOpen:!0,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("div",{className:"grid-control__inspector-controls--read-only",children:[(0,_.jsx)("span",{className:"grid-control__inspector-controls--read-only-label",children:"Table Name:"}),(Ft=me.table_name,null!==Ft&&""!==Ft&&(Ft=Ft.toString()).replace(/(<([^>]+)>)/gi,""))]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("div",{className:"grid-control__inspector-controls--read-only",children:[(0,_.jsx)("span",{className:"grid-control__inspector-controls--read-only-label",children:"Table Columns/Rows:"}),X,"/",Z]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Show table borders",__nextHasNoMarginBottom:!0,checked:G,onChange:e=>function(e,t){let l,o,n;if(!1===t)Q(X-1),K(Z-1),l=e.rows.filter((e=>"0"!==e.row_id)),o=e.columns.filter((e=>"0"!==e.column_id)),n=e.cells.filter((e=>"0"!==e.row_id&&"0"!==e.column_id)),S(e.table_id,l,o,n);else{Q(X+1),K(Z+1);const t=[];t.push(Ne(le,0,"Border"));const s=[];for(let e=0;e<=X;e++){const t=Se(le,e,0,"Border");s.push(t)}const a=[];a.push(Re(le,0,"Border"));const r=[];for(let e=1;e<=Z;e++){const t=Se(le,0,e,"Border");r.push(t)}l=f("rows",[...e.rows,...t]),o=f("columns",[...e.columns,...a]),n=f("cells",[...e.cells,...s,...r]),S(e.table_id,l,o,n)}J(t),P(!1)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Hide Table Title",__nextHasNoMarginBottom:!0,checked:Je,onChange:e=>function(e,t){const l={...e.attributes,hideTitle:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]}),(0,_.jsxs)(b.PanelBody,{title:"Table Header",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"First Row as Header?",__nextHasNoMarginBottom:!0,checked:ve,onChange:e=>function(e,t){const l={...e.attributes,enableHeaderRow:t,headerRowSticky:!1};Xe(e.table_id,"table","","ATTRIBUTES",l);const o={...e.rows.find((e=>"1"===e.row_id)).attributes,isHeader:!!t};Xe(e.table_id,"row","1","ATTRIBUTES",o)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Freeze Header Row?",__nextHasNoMarginBottom:!0,disabled:!ve,checked:He,onChange:e=>function(e,t){const l={...e.attributes,headerRowSticky:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("span",{className:"inspector-controls-menu__header-alignment--middle",children:[(0,_.jsx)(h.AlignmentControl,{id:"header-alignment",value:Ee,onChange:e=>function(e,t){const l={...e.attributes,headerAlignment:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)}),(0,_.jsx)("label",{className:"inspector-controls-nemu__label--left-margin",htmlFor:"header-alignment",children:"Text Alignment"})]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.BorderBoxControl,{className:"border-box-workaround",__next40pxDefaultSize:!0,__experimentalIsRenderedInSidebar:!0,label:"Borders",isCompact:"true",colors:ae,value:Ue,onChange:e=>function(e,t){const l={...e.attributes,headerBorder:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]}),(0,_.jsxs)(b.PanelBody,{title:"Table Body",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Allow Horizontal Acroll?",__nextHasNoMarginBottom:!0,checked:Te,onChange:e=>function(e,t){const l={...e.attributes,allowHorizontalScroll:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("span",{className:"inspector-controls-menu__header-alignment--middle",children:[(0,_.jsx)(h.AlignmentControl,{id:"body-alignment",value:Oe,onChange:e=>function(e,t){const l={...e.attributes,bodyAlignment:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)}),(0,_.jsx)("label",{className:"inspector-controls-menu__label--left-margin",htmlFor:"body-alignment",children:"Text Alignment"})]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.BorderBoxControl,{className:"border-box-workaround",label:"Borders",hideLabelFromVision:"false",isCompact:"true",colors:ae,value:De,onChange:e=>function(e,t){const l={...e.attributes,bodyBorder:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]})]})}),(0,_.jsxs)(h.InspectorControls,{group:"styles",children:[(0,_.jsxs)(b.PanelBody,{title:"Banded Table Rows",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Display Banded Rows",__nextHasNoMarginBottom:!0,checked:Le,onChange:e=>function(e,t){const l={...e.attributes,bandedRows:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(h.PanelColorSettings,{__experimentalIsRenderedInSidebar:!0,title:"Banded Row Color",colors:se,colorSettings:[{value:We,onChange:e=>et(me,"text",e),label:"Text"},{value:ze,onChange:e=>et(me,"background",e),label:"Background"}]})]}),(0,_.jsxs)(b.PanelBody,{title:"Grid Lines",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Display Inner Grid Lines",__nextHasNoMarginBottom:!0,checked:fe,onChange:e=>function(e,t){const l={...e.attributes,showGridLines:t};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.__experimentalNumberControl,{label:"Inner Grid Line Width",value:Fe,labelPosition:"side",onChange:e=>function(e,t){const l={...e.attributes,gridLineWidth:Number(t)};Xe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]})]}),(0,_.jsx)(h.InspectorControls,{group:"typography"}),(0,_.jsxs)("div",{style:{display:"block"},children:[!Je&&(0,_.jsx)(h.RichText,{id:"tableTitle",style:{"--gridAlignment":Ge},tagName:"p",allowedFormats:["core/bold","core/italic"],onChange:e=>Xe(le,"table_name","","PROP",e),value:me.table_name}),(0,_.jsx)(b.TabbableContainer,{children:(0,_.jsx)("div",{className:"grid-scroller",style:{"--headerRowSticky":ht},children:(0,_.jsxs)("div",{className:"grid-control "+mt,style:{"--gridTemplateColumns":tt,"--horizontalScroll":it,"--headerRowSticky":ht,"--gridNumColumns":X,"--gridNumRows":Z,"--gridAlignment":Ge},children:[G&&(0,_.jsx)("div",{className:"grid-control__border",children:me.cells.filter((e=>e.attributes.border&&"0"===e.row_id)).map((({table_id:e,row_id:t,column_id:l,cell_id:o,content:n,classes:s})=>{const a=T(t,l,n),r=function(e,t,l){return!(!e||t!==l)}(L,H,l),i="1"===l;return(0,_.jsxs)(_.Fragment,{children:[i&&te,(0,_.jsxs)("div",{id:o,onMouseDown:e=>$e(l,t,me),className:s,children:[a,r&&(0,_.jsx)(Me,{tableId:e,columnId:l,columnLabel:a,columnAttributes:O,enableProFeatures:!1,updatedColumn:Ze})]})]})}))}),me.rows.filter((e=>!0===e.attributes.isHeader)).map((({row_id:e})=>{const t=e;return(0,_.jsx)("div",{className:"grid-control__header",style:{"--gridTemplateHeaderRows":lt,"--startGridHeaderRowNbr":nt,"--endGridHeaderRowNbr":st,"--headerBorderTopColor":pt,"--headerBorderTopStyle":wt,"--headerBorderTopWidth":xt,"--headerBorderRightColor":ft,"--headerBorderRightStyle":Tt,"--headerBorderRightWidth":vt,"--headerBorderBottomColor":Et,"--headerBorderBottomStyle":Ct,"--headerBorderBottomWidth":yt,"--headerBorderLeftColor":Nt,"--headerBorderLeftStyle":Rt,"--headerBorderLeftWidth":St,"--headerTextAlignment":_t},children:me.cells.filter((e=>e.row_id===t)).map((({table_id:e,row_id:t,column_id:l,cell_id:o,content:n,attributes:s,classes:a})=>{const r="1"===l,i=s.border,c=T(t,l,n),d=v(W,H,t),u=ut,b=bt;return(0,_.jsxs)(_.Fragment,{children:[r&&i&&te,i&&(0,_.jsxs)("div",{id:o,onMouseDown:e=>$e(l,t,me),className:a,children:[c,d&&(0,_.jsx)(Ve,{tableId:e,rowId:t,rowLabel:c,rowAttributes:F,updatedRow:Ke})]}),r&&te,!i&&(0,_.jsx)(h.RichText,{id:o,className:"grid-control__header-cells",style:{"--showGridLines":u,"--gridLineWidth":b},tabIndex:"0",tagName:"div",onChange:t=>Xe(e,"cell",o,"CONTENT",t),value:n})]})}))})})),(0,_.jsx)("div",{className:"grid-control__body",style:{"--gridTemplateBodyRows":ot,"--startGridBodyRowNbr":at,"--endGridBodyRowNbr":rt,"--bodyBorderTopColor":It,"--bodyBorderTopStyle":At,"--bodyBorderTopWidth":kt,"--bodyBorderRightColor":Pt,"--bodyBorderRightStyle":Ht,"--bodyBorderRightWidth":Ut,"--bodyBorderBottomColor":Ot,"--bodyBorderBottomStyle":Dt,"--bodyBorderBottomWidth":Lt,"--bodyBorderLeftColor":Mt,"--bodyBorderLeftStyle":Wt,"--bodyBorderLeftWidth":zt,"--bodyTextAlignment":Bt},children:me.rows.filter((e=>!0!==e.attributes.isHeader&&"0"!==e.row_id)).map((({row_id:e})=>{const t=e;let l="";const o=ve?1:0;return Le&&0==o&&Number(e)%2==0&&(l+="grid-control__body-rows--banded-row "),Le&&1==o&&Number(e)>1&&(Number(e)+o)%2==0&&(l+="grid-control__body-rows--banded-row "),(0,_.jsx)("div",{className:"grid-control__body-row "+l,style:{"--bandedRowTextColor":ct,"--bandedRowBackgroundColor":dt},children:me.cells.filter((e=>e.row_id===t)).map((({table_id:e,row_id:t,column_id:l,cell_id:o,content:n,attributes:s,classes:a})=>{const r="1"===l,i=s.border,c=T(t,l,n),d=v(W,H,t),u=ut,b=bt;return(0,_.jsxs)(_.Fragment,{children:[r&&i&&te,i&&(0,_.jsxs)("div",{id:o,onMouseDown:e=>$e(l,t,me),className:a,children:[c,d&&(0,_.jsx)(Ve,{tableId:e,rowId:t,rowLabel:c,rowAttributes:F,updatedRow:Ke})]}),r&&!i&&te,!i&&(0,_.jsx)(h.RichText,{id:o,className:"grid-control__body-cells "+a,style:{"--showGridLines":u,"--gridLineWidth":b},tabIndex:"0",tagName:"div",onChange:t=>Xe(e,"cell",o,"CONTENT",t),value:n})]})}))})}))})]})})})]})]}),!be&&we&&(0,_.jsx)(b.Spinner,{children:"Retrieving Table Data"}),be&&(0,_.jsx)(b.Placeholder,{label:(0,u.__)("Dynamic Table"),icon:(0,_.jsx)(h.BlockIcon,{icon:g,showColors:!0}),instructions:(0,u.__)("Create a new dynamic table."),children:(0,_.jsxs)("form",{className:"blocks-table__placeholder-form",onSubmit:function(e){e.preventDefault(),Qe(X,Z,Y)},children:[(0,_.jsx)(b.__experimentalInputControl,{label:(0,u.__)("Table Name"),placeholder:"New Table",required:"true",onChange:e=>q(e),value:Y,className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.__experimentalNumberControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Table Columns"),min:1,required:"true",value:X,onChange:e=>function(e){let t=e;e<1||e>50?(I("error","Cannot have "+e+" columns.  You must have at least 1 and no more than 50 columns.",{id:"invalidNumColumns",isDismissible:!0,politeness:"assertive"}),t=Number(X)):A("invalidNumColumns"),Q(t)}(e),className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.__experimentalNumberControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Table Rows"),required:"true",min:1,value:Z,onChange:e=>function(e){let t=e;e<1||e>1e3?(I("error","Cannot have "+e+" rows.  You must have at least 1 and no more than 1,000 rows.",{id:"invalidNumRows",isDismissible:!0,politeness:"assertive"}),t=Number(Z)):A("invalidNumRows"),K(t)}(e),className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.Button,{className:"blocks-table__placeholder-button",variant:"primary",type:"submit",children:(0,u.__)("Create Table")})]})})]});var Ft},save:e=>null})}},l={};function o(e){var n=l[e];if(void 0!==n)return n.exports;var s=l[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,l,n,s)=>{if(!l){var a=1/0;for(d=0;d<e.length;d++){for(var[l,n,s]=e[d],r=!0,i=0;i<l.length;i++)(!1&s||a>=s)&&Object.keys(o.O).every((e=>o.O[e](l[i])))?l.splice(i--,1):(r=!1,s<a&&(a=s));if(r){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,n,s]},o.d=(e,t)=>{for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,l)=>{var n,s,[a,r,i]=l,c=0;if(a.some((t=>0!==e[t]))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(i)var d=i(o)}for(t&&t(l);c<a.length;c++)s=a[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},l=globalThis.webpackChunkdynamic_tables=globalThis.webpackChunkdynamic_tables||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=o.O(void 0,[350],(()=>o(665)));n=o.O(n)})();