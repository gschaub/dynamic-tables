(()=>{"use strict";var e,t={665:(e,t,l)=>{var o={};l.r(o),l.d(o,{getDeletedTables:()=>W,getTable:()=>O,getTableIdByBlock:()=>L,getTables:()=>D,getUnmountedTables:()=>M,getUnsavedTables:()=>z});var n={};l.r(n),l.d(n,{addColumn:()=>be,addRow:()=>he,assignTableId:()=>pe,createTableEntity:()=>ae,deleteTableEntity:()=>ce,processDeletedTables:()=>de,processUnmountedTables:()=>ue,receiveNewTable:()=>ne,receiveTable:()=>se,removeColumn:()=>me,removeRow:()=>_e,removeTableProp:()=>ge,saveTableEntity:()=>re,updateCell:()=>ve,updateColumn:()=>fe,updateRow:()=>xe,updateTableBorder:()=>Te,updateTableEntity:()=>ie,updateTableProp:()=>we});var s={};l.r(s),l.d(s,{getTable:()=>ye});const a=window.wp.blocks,r=window.wp.data,i=window.wp.element,c=window.wp.editor,d=window.wp.notices,u=window.wp.i18n,b=window.wp.components,h=window.wp.blockEditor,m=window.wp.primitives,_=window.ReactJSXRuntime,p=(m.SVG,m.Path,(0,_.jsx)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)(m.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})})),w={CREATE_TABLE:"CREATE_TABLE",INSERT_COLUMN:"INSERT_COLUMN",INSERT_ROW:"INSERT_ROW",DELETE_TABLE:"DELETE_TABLE",DELETE_COLUMN:"DELETE_COLUMN",DELETE_ROW:"DELETE_ROW",CHANGE_TABLE_ID:"CHANGE_TABLE_ID",UPDATE_TABLE_PROP:"UPDATE_TABLE_PROP",REMOVE_TABLE_PROP:"REMOVE_TABLE_PROP",UPDATE_ROW:"UPDATE_ROW",UPDATE_COLUMN:"UPDATE_COLUMN",UPDATE_CELL:"UPDATE_CELL",RECEIVE_HYDRATE:"RECEIVE_HYDRATE",RECEIVE_HYDRATE_TEST:"RECEIVE_HYDRATE_TEST",PERSIST:"PERSIST",PROCESS_BORDERS:"PROCESS_BORDERS"};function g(e){const t=[{nbr:"1",letter:"A"},{nbr:"2",letter:"B"},{nbr:"3",letter:"C"},{nbr:"4",letter:"D"},{nbr:"5",letter:"E"},{nbr:"6",letter:"F"},{nbr:"7",letter:"G"},{nbr:"8",letter:"H"},{nbr:"9",letter:"I"},{nbr:"a",letter:"J"},{nbr:"b",letter:"k"},{nbr:"c",letter:"L"},{nbr:"d",letter:"M"},{nbr:"e",letter:"N"},{nbr:"f",letter:"O"},{nbr:"g",letter:"P"},{nbr:"h",letter:"Q"},{nbr:"i",letter:"R"},{nbr:"j",letter:"S"},{nbr:"k",letter:"T"},{nbr:"l",letter:"U"},{nbr:"m",letter:"V"},{nbr:"n",letter:"W"},{nbr:"o",letter:"X"},{nbr:"p",letter:"Y"},{nbr:"q",letter:"Z"}];if(0===e)return"0";const l=e.toString(26).split("");let o="";return l.map((e=>{o+=t.find((t=>t.nbr===e)).letter})),o}function x(e,t,l,o){return e.map((e=>e[t]===l?{...e,...o}:e))}function f(e,t){if("rows"===e){const e=[...t];return e.sort(((e,t)=>Number([e.row_id])<Number([t.row_id])?-1:1)),e}if("columns"===e){const e=[...t];return e.sort(((e,t)=>Number([e.column_id])<Number([t.column_id])?-1:1)),e}if("cells"===e){const e=[...t];return e.sort(((e,t)=>Number([e.row_id])===Number([t.row_id])?Number([e.column_id])<Number([t.column_id])?-1:1:Number([e.row_id])<Number([t.row_id])?-1:1)),e}}function v(e,t,l){return"0"===e&&"0"===t?"":l}function T(e,t,l){return!(!e||t!==l)}const{CREATE_TABLE:y,INSERT_COLUMN:C,INSERT_ROW:E,DELETE_TABLE:N,DELETE_COLUMN:S,DELETE_ROW:R,CHANGE_TABLE_ID:j,UPDATE_TABLE_PROP:B,REMOVE_TABLE_PROP:k,UPDATE_ROW:H,UPDATE_COLUMN:P,UPDATE_CELL:I,RECEIVE_HYDRATE:A,PROCESS_BORDERS:U}=w;function O(e,t,l){return e.tables.hasOwnProperty(t)?e.tables[t]:{table_id:t,block_table_ref:"",post_id:"",table_status:"",table_name:"",attributes:[],classes:"",rows:[],columns:[],cells:[]}}function D(e){return e.tables}function L(e,t){const l=Object.keys(e.tables).reduce(((l,o)=>(e.tables[o]?.block_table_ref===t&&(l[o]={...e.tables[o]}),l)),{});return 0!==l.length&&Object.keys(l)}function M(e){return Object.keys(e.tables).reduce(((t,l)=>(e.tables[l].unmounted_blockid&&(t[l]={...e.tables[l]}),t)),{})}function W(e){return Object.keys(e.tables).reduce(((t,l)=>("deleted"===e.tables[l].table_status&&(t[l]={...e.tables[l]}),t)),{})}function z(e){return Object.keys(e.tables).reduce(((t,l)=>("new"===e.tables[l].table_status&&(t[l]={...e.tables[l]}),t)),{})}const F=window.wp.coreData,{CREATE_TABLE:V,INSERT_COLUMN:G,INSERT_ROW:J,DELETE_TABLE:Y,DELETE_COLUMN:q,DELETE_ROW:X,CHANGE_TABLE_ID:Q,UPDATE_TABLE_PROP:Z,REMOVE_TABLE_PROP:K,UPDATE_ROW:$,UPDATE_COLUMN:ee,UPDATE_CELL:te,RECEIVE_HYDRATE:le,PROCESS_BORDERS:oe}=w;function ne(e){return{type:V,tableId:e.table.table_id,...e}}function se(e,t,l,o,n,s,a,r,i,c){return{type:le,tableId:e,table:{table_id:e,block_table_ref:t,table_status:l,post_id:o,table_name:n,attributes:s,classes:a,rows:r,columns:i,cells:c}}}const ae=()=>async({select:e,dispatch:t,registry:l})=>{const{table_id:o,block_table_ref:n,post_id:s,table_name:a,attributes:r,classes:i,rows:c,columns:d,cells:u}=e.getTable("0",!0),b={title:a,header:{id:o,block_table_ref:n,status:"new",post_id:s,table_name:a,attributes:r,classes:i},rows:[...c],columns:[...d],cells:[...u]};try{const e=await l.dispatch(F.store).saveEntityRecord("dynamic-tables","table",b);return t.assignTableId(e.id),e.id}catch(e){console.log("Error in createTableEntity -  Table ID - "+o+", block table ref = "+n+", Post Id = "+s)}},re=e=>({registry:t})=>{try{t.dispatch(F.store).saveEditedEntityRecord("dynamic-tables","table",e)}catch(t){console.log("Error in saveTableEntity - Table ID - "+e),alert("            ...Save Table Entity - async error - "+t)}},ie=(e,t="")=>({select:l,registry:o})=>{const{table_id:n,block_table_ref:s,table_status:a,post_id:r,table_name:i,attributes:c,classes:d,rows:u,columns:b,cells:h}=l.getTable(e,!1),m=u.filter((e=>"0"!==e.row_id)),_=b.filter((e=>"0"!==e.column_id)),p=h.filter((e=>"0"!==e.row_id&&"0"!==e.column_id)).map((({table_id:e,column_id:t,row_id:l,attributes:o,classes:n,content:s})=>({table_id:e,column_id:t,row_id:l,attributes:o,classes:n,content:s}))),w={id:e,title:i,header:{id:n,block_table_ref:s,status:((e,t)=>e||t)(t,a),post_id:r,table_name:i,attributes:c,classes:d},rows:[...m],columns:[..._],cells:[...p]};try{o.dispatch(F.store).editEntityRecord("dynamic-tables","table",n,w)}catch(t){console.log("Error in updateTableEntity - Table ID - "+e),alert("            ...Update Table Entity - async error - "+t)}},ce=e=>async({select:t,dispatch:l,registry:o})=>{try{await o.dispatch(F.store).deleteEntityRecord("dynamic-tables","table",e),l({type:Y,tableId:e})}catch(t){console.log("Error in deleteTableEntity - Table ID - "+e),alert("            ...Resolver - async error - "+t)}},de=e=>({dispatch:t})=>{Object.keys(e).forEach((l=>{t.deleteTableEntity(e[l].table_id)}))},ue=e=>({dispatch:t,registry:l})=>{Object.keys(e).forEach((o=>{const n=e[o].unmounted_blockid,s=e[o].prior_status;l.select(h.store).getBlock(n)?(t.updateTableProp(e[o].table_id,"table_status"),t.updateTableProp(e[o].table_id,"table_status",s),t.removeTableProp(e[o].table_id,"unmounted_blockid"),t.removeTableProp(e[o].table_id,"prior_status"),t.updateTableEntity(e[o].table_id)):(t.updateTableProp(e[o].table_id,"table_status","deleted"),t.removeTableProp(e[o].table_id,"unmounted_blockid"))}))},be=(e,t,l,o)=>({type:G,tableId:e,columnId:t,newColumn:l,columnCells:o}),he=(e,t,l,o)=>({type:J,tableId:e,rowId:t,newRow:l,rowCells:o}),me=(e,t)=>({type:q,tableId:e,columnId:t}),_e=(e,t)=>({type:X,tableId:e,rowId:t}),pe=e=>({type:Q,tableId:"0",newTableId:String(e)}),we=(e,t,l)=>({type:Z,tableId:e,attribute:t,value:l}),ge=(e,t)=>({type:K,tableId:e,attribute:t}),xe=(e,t,l,o)=>({type:$,tableId:e,rowId:t,attribute:l,value:o}),fe=(e,t,l,o)=>({type:ee,tableId:e,columnId:t,attribute:l,value:o}),ve=(e,t,l,o)=>({type:te,tableId:e,cellId:t,attribute:l,value:o}),Te=(e,t,l,o)=>async({dispatch:n})=>{await n({type:oe,tableId:e,rows:t,columns:l,cells:o})},ye=(e,t)=>async({dispatch:l,registry:o})=>{if(t&&"0"!=e)try{const t=await o.resolveSelect(F.store).getEntityRecord("dynamic-tables","table",e),n=t.id,s=t.header.block_table_ref,a=t.header.status,r=t.header.post_id,i=t.header.table_name,c=t.header.attributes,d=t.header.classes,u=t.rows,b=t.columns;t.cells.forEach((e=>{e.cell_id=g(e.column_id)+e.row_id}));const h=t.cells;l.receiveTable(n,s,a,r,i,c,d,u,b,h)}catch(t){console.log("Error in getTable - Table ID = "+e),alert("            ...Resolver - async error - "+JSON.stringify(t,null,4))}},Ce=(0,r.createReduxStore)("dynamic-tables/table",{reducer:(e={tables:{}},t)=>{const l=t.tableId,o=((e={table:{}},t)=>{switch(t.type){case y:return{table:{...t.table}};case j:const l={...e},o=[],n=[],s=[];return l.rows.forEach((e=>{const l={...e,table_id:t.newTableId};o.push(l)})),l.columns.forEach((e=>{const l={...e,table_id:t.newTableId};n.push(l)})),l.cells.forEach((e=>{const l={...e,table_id:t.newTableId};s.push(l)})),{table:{...e,table_id:t.newTableId,rows:[...o],columns:[...n],cells:[...s]}};case B:return{table:{...e,[t.attribute]:t.value}};case k:const a={...e};return delete a[t.attribute],{table:a};case C:const r={...e},i=[];r.columns.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))i.push(e);else{const t={table_id:e.table_id,column_id:String(Number(e.column_id)+1),column_name:e.column_name,attributes:e.attributes,classes:e.classes};i.push(t)}})),i.push(t.newColumn);const c=f("columns",i),d=[];r.cells.forEach((e=>{if(e.column_id<t.columnId)d.push(e);else{const t=String(Number(e.column_id)+1),l=g(t),o=0==Number(e.row_id)?l:e.content,n={table_id:e.table_id,column_id:t,row_id:e.row_id,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:o};d.push(n)}}));const u=f("cells",[...d,...t.columnCells]);return{table:{...r,rows:[...r.rows],columns:[...c],cells:[...u]}};case E:const b={...e},h=[];b.rows.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))h.push(e);else{const t={table_id:e.table_id,row_id:String(Number(e.row_id)+1),attributes:e.attributes,classes:e.classes};h.push(t)}})),h.push(t.newRow);const m=f("rows",h),_=[];b.cells.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))_.push(e);else{const t=String(Number(e.row_id)+1),l="0"==e.column_id?"0":g(e.column_id),o=0==Number(e.column_id)?t:e.content,n={table_id:e.table_id,column_id:e.column_id,row_id:t,cell_id:l+t,attributes:e.attributes,classes:e.classes,content:o};_.push(n)}}));const p=f("cells",[..._,...t.rowCells]);return{table:{...b,rows:[...m],columns:[...b.columns],cells:[...p]}};case S:const w={...e},v=[];w.columns.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))v.push(e);else if(Number(e.column_id)>Number(t.columnId)){const t={table_id:e.table_id,column_id:String(Number(e.column_id)-1),column_name:e.column_name,attributes:e.attributes,classes:e.classes};v.push(t)}}));const T=[];return w.cells.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))T.push(e);else if(Number(e.column_id)>Number(t.columnId)){const t=String(Number(e.column_id)-1),l=g(t),o=0==Number(e.row_id)?l:e.content,n={table_id:e.table_id,column_id:t,row_id:e.row_id,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:o};T.push(n)}})),{table:{...w,rows:[...w.rows],columns:[...v],cells:[...T]}};case R:const N={...e},O=[];N.rows.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))O.push(e);else if(Number(e.row_id)>Number(t.rowId)){const t={table_id:e.table_id,row_id:String(Number(e.row_id)-1),attributes:e.attributes,classes:e.classes};O.push(t)}}));const D=[];return N.cells.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))D.push(e);else if(Number(e.row_id)>Number(t.rowId)){const t=String(Number(e.row_id)-1),l="0"==e.column_id?"0":g(e.column_id),o=0==Number(e.column_id)?t:e.content,n={table_id:e.table_id,column_id:e.column_id,row_id:t,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:o};D.push(n)}})),{table:{...N,rows:[...O],columns:[...N.columns],cells:[...D]}};case H:let L=' "'+t.value+'"';"attributes"===t.attribute&&(L=JSON.stringify(t.value));const M={...e},W=JSON.parse('{ "'+t.attribute+'" :'+L+"}"),z=x(M.rows,"row_id",t.rowId,W);return{table:{...M,rows:[...z],columns:[...M.columns],cells:[...M.cells]}};case P:let F=' "'+t.value+'"';"attributes"===t.attribute&&(F=JSON.stringify(t.value));const V={...e},G=JSON.parse('{ "'+t.attribute+'" :'+F+"}"),J=x(V.columns,"column_id",t.columnId,G);return{table:{...V,rows:[...V.rows],columns:[...J],cells:[...V.cells]}};case I:const Y={...e},q=JSON.parse('{ "'+t.attribute+'" : "'+t.value+'"}'),X=x(Y.cells,"cell_id",t.cellId,q);return{table:{...e,rows:[...Y.rows],columns:[...Y.columns],cells:[...X]}};case U:return{table:{...{...e},rows:f("rows",[...t.rows]),columns:f("columns",[...t.columns]),cells:f("cells",[...t.cells])}};case A:return{table:{...e.table,...t.table}};default:return e}})(e.tables[l],t);if("{}"===JSON.stringify(o.table))return e;const n={...e.tables};switch(t.type){case j:const l={[t.newTableId]:o.table};return{tables:{...Object.keys(e.tables).reduce(((l,o)=>(e.tables[o].table_id!==t.tableId&&(l[o]={...e.tables[o]}),l)),{}),...l}};case N:return{tables:{...Object.keys(e.tables).reduce(((l,o)=>(o!==String(t.tableId)&&(l[o]={...e.tables[o],rows:[...e.tables[o].rows],columns:[...e.tables[o].columns],cells:[...e.tables[o].cells]}),l)),{})}};default:return{tables:{...n,[t.tableId]:o.table}}}},selectors:o,actions:n,resolvers:s});(0,r.register)(Ce);const Ee=window.wp.compose;function Ne(e,t,l="Body"){let o;return o={table_id:String(e),row_id:String(t),attributes:je("rows",l),classes:Be("rows")},o}function Se(e,t,l="Body"){let o;return o="Border"===l?{table_id:String(e),column_id:String(t),column_name:"Border",attributes:je("columns",l),classes:""}:{table_id:String(e),column_id:String(t),column_name:"Comments",attributes:je("columns",l),classes:Be("columns")},o}function Re(e,t,l,o="Body"){let n;const s=g(t),a=0==l?s:String(l);return n="Border"===o?{table_id:String(e),column_id:String(t),row_id:String(l),cell_id:0===l?s+"0":"0"+String(t),attributes:je("cells",o),classes:"grid-control__border-cells hover",content:a}:{table_id:String(e),column_id:String(t),row_id:String(l),cell_id:s+l,attributes:je("cells",o),classes:Be("cells"),content:""},n}function je(e,t="Body"){const l={showGridLines:!0,bandedRows:!1,bandedRowBackgroundColor:"#d8dbda",bandedTextColor:"#d8dbda",gridLineWidth:1,allowHorizontalScroll:!0,enableHeaderRow:!1,headerAlignment:"center",headerRowSticky:!1,headerBorder:{color:"black",style:"solid",width:"1px"},horizontalAlignment:"none",bodyAlignment:void 0,bodyBorder:{color:"black",style:"solid",width:"1px"},verticalAlignment:"none",hideTitle:!0},o={columnWidthType:"Proportional",minWidth:2,minWidthUnits:"ch",maxWidth:1,maxWidthUnits:"fr",fixedWidth:1,fixedWidthUnits:"fr",disableForTablet:!1,disableForPhone:!1,isFixedLeftColumnGroup:!1,horizontalAlignment:"none"},n={columnWidthType:"Fixed",minWidth:0,minWidthUnits:"",maxWidth:0,maxWidthUnits:"",fixedWidth:20,fixedWidthUnits:"px",disableForTablet:!1,disableForPhone:!1,isFixedLeftColumnGroup:!1,horizontalAlignment:"center"},s={rowHeightType:"Auto",minHeight:0,minHeightUnits:"em",maxHeight:0,maxHeightUnits:"em",fixedHeight:0,fixedHeightUnits:"em",isHeader:!1,verticalAlignment:"none"},a={rowHeightType:"Auto",minHeight:0,minHeightUnits:"em",maxHeight:0,maxHeightUnits:"em",fixedHeight:0,fixedHeightUnits:"em",isHeader:!1,verticalAlignment:"none"},r={border:!1},i={border:!0};switch(e){case"table":return l;case"columns":return"Border"===t?n:o;case"rows":return"Border"===t?a:s;case"cells":return"Border"===t?i:r}}function Be(e){switch(e){case"table":case"columns":case"rows":case"cells":return""}}function ke(e,t,l,o,n,s){let a;switch(t){case"Header":a=2,a=n?a++:a;break;case"Body":a=e+l,a=n?a++:a,a=o?a-1:a,a=s?a-1:a;break;default:console.log("Unknown row type")}return a}function He(e,t,l){if(!e&&!t)return l}function Pe(e){if(e){const t=Object.entries(e);for(let e=0;e<t.length;e++)if(t[e].some((e=>"object"==typeof e)))return"split";return"flat"}return"unknown"}function Ie(e,t,l,o){switch(o){case"split":return e[t][l];case"flat":return e[l];default:switch(l){case"color":return"black";case"style":return"solid";case"width":return"1px"}}}const Ae=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(m.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})}),Ue=(0,_.jsxs)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,_.jsx)(m.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,_.jsx)(m.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]}),Oe=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.4 3.776v3.648H2.752v1.792H6.4v3.648h1.728V9.216h3.712V7.424H8.128V3.776zM0 17.92V0h20.48v17.92H0zM12.8 1.28H1.28v14.08H12.8V1.28zm6.4 0h-5.12v3.84h5.12V1.28zm0 5.12h-5.12v3.84h5.12V6.4zm0 5.12h-5.12v3.84h5.12v-3.84z"})}),De=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.4 9.98L7.68 8.7v-.256L6.4 7.164V9.98zm6.4-1.532l1.28-1.28V9.92L12.8 8.64v-.192zm7.68 9.472V0H0v17.92h20.48zm-1.28-2.56h-5.12v-1.024l-.256.256-1.024-1.024v1.792H7.68v-1.792l-1.024 1.024-.256-.256v1.024H1.28V1.28H6.4v2.368l.704-.704.576.576V1.216h5.12V3.52l.96-.96.32.32V1.216h5.12V15.36zm-5.76-2.112l-3.136-3.136-3.264 3.264-1.536-1.536 3.264-3.264L5.632 5.44l1.536-1.536 3.136 3.136 3.2-3.2 1.536 1.536-3.2 3.2 3.136 3.136-1.536 1.536z"})});function Le(e){const{openColumnWidth:t,columnLabel:l,columnAttributes:o,enableProFeatures:n}=e;function s(e){t(!1)}(0,i.useEffect)((()=>{switch(o.columnWidthType){case"Proportional":d(!1),h(!0),p(!0);break;case"Auto":d(!0),h(!0),p(!0);break;case"Fixed":d(!0),h(!0),p(!1);break;case"Custom":d(!0),h(!1),p(!0)}r(o.columnWidthType),g(o.minWidth),f(o.minWidthUnits),T(o.maxWidth),C(o.maxWidthUnits),N(o.fixedWidth),R(o.fixedWidth),H(o.disableForPhone),B(o.disableForTablet)}),[o]);const[a,r]=(0,i.useState)(),[c,d]=(0,i.useState)(!0),[u,h]=(0,i.useState)(!0),[m,p]=(0,i.useState)(!0),[w,g]=(0,i.useState)(0),[x,f]=(0,i.useState)(),[v,T]=(0,i.useState)(1),[y,C]=(0,i.useState)(),[E,N]=(0,i.useState)(0),[S,R]=(0,i.useState)(),[j,B]=(0,i.useState)(!1),[k,H]=(0,i.useState)(!1);function P(e){g(e.target.value)}function I(e){f(e)}function A(e){T(e.target.value)}return(0,_.jsx)(_.Fragment,{children:t&&(0,_.jsxs)(b.Modal,{title:"Configure Column Width",onRequestClose:s,focusOnMount:"firstContentElement",isDismissible:"false",shouldCloseOnClickOutside:"false",size:"large",children:[(0,_.jsxs)("p",{className:"column-label",children:["For column ",l]}),(0,_.jsxs)("form",{onSubmit:function(e){const l={columnWidthType:a,minWidth:w,minWidthUnits:x,maxWidth:Number(v),maxWidthUnits:y,fixedWidth:E,fixedWidthUnits:S,disableForTablet:j,disableForPhone:k,isFixedLeftColumnGroup:!1,horizontalAlignment:"none"};t(!1,l)},onMouseDown:function(e){e.stopPropagation()},children:[(0,_.jsx)(b.SelectControl,{label:"Width Type",value:a,onChange:e=>function(e){switch(e){case"Proportional":T(1),C("fr"),g(20),f("ch"),N(0),R("px"),d(!1),h(!0),p(!0);break;case"Auto":T(0),C("fr"),g(0),f("ch"),N(0),R("px"),d(!0),h(!0),p(!0);break;case"Fixed":T(0),C("fr"),g(0),f("ch"),N(40),R("px"),d(!0),h(!0),p(!1);break;case"Custom":T(40),C("ch"),g(20),f("ch"),N(0),R("px"),d(!0),h(!1),p(!0)}r(e)}(e),options:[{value:"Proportional",label:"Proportional"},{value:"Auto",label:"Automatic"},{value:"Fixed",label:"Fixed width"},{value:"Custom",label:"Custom"}],__nextHasNoMarginBottom:!0}),(0,_.jsxs)("fieldset",{className:!0===c?" column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Proportional Width"}),(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-value-input",label:"Number of portions",labelPosition:"side",onBlur:e=>A(e),value:v}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-value-input",label:"Minimum width",labelPosition:"left",value:w,onBlur:e=>P(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:x,onChange:e=>I(e),options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===m?"column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Fixed Width"}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Fixed width",labelPosition:"left",value:E,onBlur:e=>{N(Number(e.target.value))}}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",label:"Units",labelPosition:"left",value:S,onChange:e=>{R(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"font"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===u?"column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Custom Width"}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Minimum width",labelPosition:"left",value:w,onBlur:e=>P(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:x,onChange:e=>I(e),options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Maximum width",labelPosition:"left",value:v,onBlur:e=>A(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:y,onChange:e=>{C(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),n&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.CheckboxControl,{label:"Hide for tablet",checked:j,onChange:function(e){B(e)}}),(0,_.jsx)(b.CheckboxControl,{label:"Hide for phone",checked:k,onChange:function(e){H(e)}})]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(b.Button,{variant:"secondary",onClick:s,children:"Cancel"}),(0,_.jsx)(b.Button,{variant:"primary",type:"submit",children:"Update"})]})]})]})})}function Me(e){const[t,l]=(0,i.useState)(!1),[o,n]=(0,i.useState)({}),{tableId:s,columnId:a,columnLabel:r,enableProFeatures:c,updatedColumn:d}=e;function u(e,o){t?(l(!1),d(e,"attributes",s,a,o)):(e.preventDefault(),l(!0))}return(0,i.useEffect)((()=>{n(e.columnAttributes)}),[e.columnAttributes]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.DropdownMenu,{icon:Ae,defaultOpen:"true",label:r,children:({onClose:e})=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.MenuGroup,{children:(0,_.jsx)(b.MenuItem,{icon:Ue,onClick:u,children:"Update Column Width"})}),(0,_.jsxs)(b.MenuGroup,{children:[(0,_.jsx)(b.MenuItem,{icon:Oe,onClick:e=>function(e,t){d(e,"insert",s,t,"")}(e,a),children:"Insert Column"}),(0,_.jsx)(b.MenuItem,{icon:De,onClick:e=>function(e,t){d(e,"delete",s,t,"")}(e,a),children:"Delete Column"})]})]})}),t&&(0,_.jsx)(Le,{columnId:a,columnLabel:r,columnAttributes:o,enableProFeatures:c,openColumnWidth:u})]})}const We=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.656 6.464h2.88v2.88h1.408v-2.88h2.88V5.12h-2.88V2.24H9.536v2.88h-2.88zM0 17.92V0h20.48v17.92H0zm7.68-2.56h5.12v-3.84H7.68v3.84zm-6.4 0H6.4v-3.84H1.28v3.84zM19.2 1.28H1.28v9.024H19.2V1.28zm0 10.24h-5.12v3.84h5.12v-3.84zM6.656 6.464h2.88v2.88h1.408v-2.88h2.88V5.12h-2.88V2.24H9.536v2.88h-2.88zM0 17.92V0h20.48v17.92H0zm7.68-2.56h5.12v-3.84H7.68v3.84zm-6.4 0H6.4v-3.84H1.28v3.84zM19.2 1.28H1.28v9.024H19.2V1.28zm0 10.24h-5.12v3.84h5.12v-3.84z"})}),ze=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M17.728 11.456L14.592 8.32l3.2-3.2-1.536-1.536-3.2 3.2L9.92 3.648 8.384 5.12l3.2 3.2-3.264 3.264 1.536 1.536 3.264-3.264 3.136 3.136 1.472-1.536zM0 17.92V0h20.48v17.92H0zm19.2-6.4h-.448l-1.28-1.28H19.2V6.4h-1.792l1.28-1.28h.512V1.28H1.28v3.84h6.208l1.28 1.28H1.28v3.84h7.424l-1.28 1.28H1.28v3.84H19.2v-3.84z"})});function Fe(e){const{openRowHeight:t,rowLabel:l,rowAttributes:o}=e;function n(e){t(!1)}(0,i.useEffect)((()=>{switch(o.rowHeightType){case"Auto":c(!0),u(!0);break;case"Fixed":c(!0),u(!1);break;case"Custom":c(!1),u(!0)}a(o.rowHeightType),m(o.minHeight),w(o.minHeightUnits),x(o.maxHeight),v(o.maxHeightUnits),y(o.fixedHeight),E(o.fixedHeightUnits)}),[o]);const[s,a]=(0,i.useState)(),[r,c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(!0),[h,m]=(0,i.useState)(0),[p,w]=(0,i.useState)(),[g,x]=(0,i.useState)(1),[f,v]=(0,i.useState)(),[T,y]=(0,i.useState)(0),[C,E]=(0,i.useState)();return(0,_.jsx)(_.Fragment,{children:t&&(0,_.jsxs)(b.Modal,{title:"Configure Row Height",onRequestClose:n,focusOnMount:"firstContentElement",isDismissible:"false",shouldCloseOnClickOutside:"false",size:"large",children:[(0,_.jsxs)("p",{className:"row-label",children:["For row ",l]}),(0,_.jsxs)("form",{onSubmit:function(e){const l={rowHeightType:s,minHeight:h,minHeightUnits:p,maxHeight:Number(g),maxHeightUnits:f,fixedHeight:T,fixedHeightUnits:C,isFixedLeftRowGroup:!1,horizontalAlignment:"none"};t(!1,l)},onMouseDown:function(e){e.stopPropagation()},children:[(0,_.jsx)(b.SelectControl,{label:"Height Type",value:s,onChange:e=>function(e){switch(e){case"Auto":x(0),v("fr"),m(0),w("ch"),y(0),E("px"),c(!0),u(!0);break;case"Fixed":x(0),v("fr"),m(0),w("ch"),y(40),E("px"),c(!0),u(!1);break;case"Custom":x(40),v("ch"),m(20),w("ch"),y(0),E("px"),c(!1),u(!0)}a(e)}(e),options:[{value:"Auto",label:"Automatic"},{value:"Fixed",label:"Fixed height"},{value:"Custom",label:"Custom"}],__nextHasNoMarginBottom:!0}),(0,_.jsxs)("fieldset",{className:!0===d?"row-height--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Fixed Height"}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Fixed height",labelPosition:"left",value:T,onBlur:e=>{y(Number(e.target.value))}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",label:"Units",labelPosition:"left",value:C,onChange:e=>{E(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"font"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===r?"row-height--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Custom Height"}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Minimum height",labelPosition:"left",value:h,onBlur:e=>{m(e.target.value)}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",labelPosition:"left",label:"Units",value:p,onChange:e=>{w(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Maximum height",labelPosition:"left",value:g,onBlur:e=>{x(e.target.value)}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",labelPosition:"left",label:"Units",value:f,onChange:e=>{v(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(b.Button,{variant:"secondary",onClick:n,children:"Cancel"}),(0,_.jsx)(b.Button,{variant:"primary",type:"submit",children:"Update"})]})]})]})})}function Ve(e){const[t,l]=(0,i.useState)(!1),[o,n]=(0,i.useState)({}),{tableId:s,rowId:a,rowLabel:r,updatedRow:c}=e;function d(e,o){t?(l(!1),c(e,"attributes",s,a,o)):(e.preventDefault(),l(!0))}return(0,i.useEffect)((()=>{n(e.rowAttributes)}),[e.rowAttributes]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.DropdownMenu,{icon:Ae,defaultOpen:"true",label:r,children:({onClose:e})=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.MenuGroup,{children:(0,_.jsx)(b.MenuItem,{icon:Ue,onClick:d,children:"Update Row Height"})}),(0,_.jsxs)(b.MenuGroup,{children:[(0,_.jsx)(b.MenuItem,{icon:We,onClick:e=>function(e,t){c(e,"insert",s,t,"")}(e,a),children:"Insert Row"}),(0,_.jsx)(b.MenuItem,{icon:ze,onClick:e=>function(e,t){c(e,"delete",s,t,"")}(e,a),children:"Delete Row"})]})]})}),t&&(0,_.jsx)(Fe,{rowId:a,rowLabel:r,rowAttributes:o,openRowHeight:d})]})}(0,r.dispatch)("core").addEntities([{name:"table",kind:"dynamic-tables",baseURL:"/dynamic-tables/v1/tables",baseURLParams:{context:"edit"},plural:"tables",label:(0,u.__)("Table"),getTitle:e=>e?.title||(0,u.__)("Unnamed Table")}]);const Ge=JSON.parse('{"UU":"dynamic-tables/dynamic-tables"}');console.log(Ge.UU),(0,a.registerBlockType)(Ge.UU,{apiVersion:3,edit:function(e){const t=(0,h.useBlockProps)({className:"dynamic-table-edit-block"}),{lockPostSaving:l}=(0,r.useDispatch)(c.store),{lockPostAutosaving:o}=(0,r.useDispatch)(c.store),{receiveNewTable:n}=(0,r.useDispatch)(Ce),{createTableEntity:s}=(0,r.useDispatch)(Ce),{saveTableEntity:a}=(0,r.useDispatch)(Ce),{addColumn:m}=(0,r.useDispatch)(Ce),{addRow:w}=(0,r.useDispatch)(Ce),{removeColumn:g}=(0,r.useDispatch)(Ce),{removeRow:x}=(0,r.useDispatch)(Ce),{updateTableProp:y}=(0,r.useDispatch)(Ce),{updateRow:C}=(0,r.useDispatch)(Ce),{updateColumn:E}=(0,r.useDispatch)(Ce),{updateCell:N}=(0,r.useDispatch)(Ce),{updateTableEntity:S}=(0,r.useDispatch)(Ce),{updateTableBorder:R}=(0,r.useDispatch)(Ce),{processUnmountedTables:j}=(0,r.useDispatch)(Ce),{processDeletedTables:B}=(0,r.useDispatch)(Ce),{createNotice:k,removeNotice:H}=(0,r.useDispatch)(d.store),[P,I]=(0,i.useState)(!0),[A,U]=(0,i.useState)(0),[O,D]=(0,i.useState)({}),[L,M]=(0,i.useState)(!1),[W,z]=(0,i.useState)(!1),[F,V]=(0,i.useState)({}),[G,J]=(0,i.useState)(!1),[Y,q]=(0,i.useState)(""),[X,Q]=(0,i.useState)(1),[Z,K]=(0,i.useState)(1),[$,ee]=(0,i.useState)(!1),te=!1,{table_id:le,block_table_ref:oe,block_alignment:ne}=e.attributes,se=(0,h.useSettings)("color.palette"),ae=se[0].map((({color:e,name:t})=>({color:e,name:t}))),{currentTableId:re}=(0,r.useSelect)((e=>{const{getTableIdByBlock:t}=e(Ce);return{currentTableId:t(oe)}})),ie=!(!$||Number(re)===Number(le)),{unmountedTables:ce}=(0,r.useSelect)((e=>{const{getUnmountedTables:t}=e(Ce);return{unmountedTables:t()}}));Object.keys(ce).length>0&&j(ce);const{deletedTables:de}=(0,r.useSelect)((e=>{const{getDeletedTables:t}=e(Ce);return{deletedTables:t()}})),ue=(()=>{const[e,t]=(0,i.useState)(!1),{hasUnsavedChanges:l}=(0,r.useSelect)((e=>({hasUnsavedChanges:e("core/editor").isEditedPostDirty()}))),o=(0,Ee.usePrevious)(l);return(0,i.useEffect)((()=>{!l&&o&&t(!0),l&&t(!1)}),[l,o]),e})();(0,i.useEffect)((()=>{ue&&(Object.keys(de).length>0&&B(de),"new"==me.table_status&&(Qe(me.table_id,"table_status","","PROP","saved"),a(me.table_id)))}),[ue,ce]);const be=""===oe,he=""===oe?"None":"0"===le?"New":P?"Stale":"Saved";be&&(l("lockPostSaving"),o("lockPostAutosaving"));const{table:me,tableStatus:_e,tableHasStartedResolving:pe,tableHasFinishedResolving:we,tableIsResolving:ge}=(0,r.useSelect)((t=>{const{getTable:n,getTableIdByBlock:s,hasStartedResolution:a,hasFinishedResolution:r,isResolving:i}=t(Ce),c=[le,P];if(""===oe)return{table:{},tableStatus:"",tableHasStartedResolving:!1,tableHasFinishedResolving:!1,tableIsResolving:!1};const d=((t,a,r)=>{let i=n(t,a);if("0"===t&&""===i.block_table_ref&&$){const t=s(r);i=n(t,a),String(e.context.postId)!==i.post_id&&"0"!==String(e.context.postId)&&Qe(i.table_id,"post_id","","PROP",String(e.context.postId)),ee(!1),l("unlockPostSaving"),o("unlockPostAutosaving"),e.setAttributes({table_id:Number(i.table_id)})}return i})(le,P,oe),u=a("getTable",c),b=r("getTable",c),h=i("getTable",c);return b&&I((()=>!1)),{table:d,tableStatus:d.table_status,tableHasStartedResolving:u,tableHasFinishedResolving:b,tableIsResolving:h}}),[le,ie,P,oe]),xe=(0,i.useRef)(_e);function fe(e,t){const l=e?.[t];return l}xe.current=_e;const ve=fe(me.attributes,"showGridLines"),Te=fe(me.attributes,"allowHorizontalScroll"),ye=fe(me.attributes,"enableHeaderRow"),Ae=fe(me.attributes,"headerAlignment"),Ue=(fe(me.attributes,"tableHeaderBackgroundColor"),fe(me.attributes,"headerRowSticky")),Oe=fe(me.attributes,"headerBorder"),De=fe(me.attributes,"bodyAlignment"),Le=fe(me.attributes,"bodyBorder"),We=fe(me.attributes,"bandedRows"),ze=fe(me.attributes,"bandedTextColor"),Fe=fe(me.attributes,"bandedRowBackgroundColor"),Ge=fe(me.attributes,"gridLineWidth"),Je=ne,Ye=(fe(me.attributes,"horizontalAlignment"),fe(me.attributes,"verticalAlignment"),fe(me.attributes,"hideTitle"));pe&&we&&!$&&String(e.context.postId)!==me.post_id&&(Qe(me.table_id,"post_id","","PROP",String(e.context.postId)),a(me.table_id)),(0,i.useEffect)((()=>()=>{Qe(me.table_id,"prior_status","","PROP",xe.current),Qe(me.table_id,"unmounted_blockid","","PROP",t["data-block"],!1)}),[]);const qe="{}"===JSON.stringify(me.table)||"None"==he?0:me.columns.length,Xe="{}"===JSON.stringify(me.table)||"None"==he?0:me.rows.length;function Qe(e,t,l,o,n,s=!0){switch(o){case"CONTENT":"cell"===t&&N(e,l,"content",n);break;case"ATTRIBUTES":"cell"===t?N(e,l,"attributes",n):"row"===t?(V(n),C(e,l,"attributes",n)):"column"===t?(D(n),E(e,l,"attributes",n)):"table"===t&&y(e,"attributes",n);break;case"CLASSES":"cell"===t?N(e,l,"classes",n):"column"===t&&E(e,l,"classes",n);break;case"PROP":y(e,t,n),"unmounted_blockid"===t&&S(e,"unknown");break;default:console.log("Unrecognized Attibute Type")}if(I(!1),s)return S(e)}function Ze(t,l,o){I(!1);const a=Date.now().toString(16),r=function(e,t,l,o){const n=function(e,t){const l=[];let o=1,n=1;for(;n<=t;){for(;o<=e;){if(1==n){const e=Re("0",String(o),String(n));l.push(e)}else{const e=Re("0",String(o),String(n));l.push(e)}o++}o=1,n++}return l}(Number(t),Number(l)),s=[];for(let e=1;e<=l;e++){const t=Ne("0",e);s.push(t)}const a=[];for(let e=1;e<=t;e++){const t=Se("0",e);a.push(t)}return{table:{table_id:"0",block_table_ref:e,post_id:"0",table_status:"new",table_name:o,attributes:je("table"),classes:Be("table"),rows:s,columns:a,cells:n}}}(a,t,l,o);e.setAttributes({block_table_ref:a}),n(r),ee(!0),s()}function Ke(e,t,l,o,n){switch(t){case"attributes":Qe(l,"column",o,"ATTRIBUTES",n);break;case"insert":U(0),M(!1),function(e,t){const l=Se(e,t),o=[];for(let l=0;l<Z;l++)if(0===l){const n=Re(e,t,l,"Border");o.push(n)}else{const n=Re(e,t,l);o.push(n)}m(e,t,l,o),I(!1),S(e)}(l,o);break;case"delete":U(0),M(!1),function(e,t){g(e,t),I(!1),S(e)}(l,o);break;default:console.log("Unrecognized Column Update Type")}}function $e(e,t,l,o,n){switch(t){case"attributes":Qe(l,"row",o,"ATTRIBUTES",n);break;case"insert":U(0),z(!1),function(e,t){const l=Ne(e,t),o=[];for(let l=0;l<X;l++)if(0===l){const n=Re(e,l,t,"Border");o.push(n)}else{const n=Re(e,l,t);o.push(n)}w(e,t,l,o),I(!1),S(e)}(l,o);break;case"delete":U(0),z(!1),function(e,t){x(e,t),I(!1),S(e)}(l,o);break;default:console.log("Unrecognized Row Update Type")}}function et(e,t,l){if("0"===t&&"0"!==e){const t=e,o=l.columns.find((({column_id:e})=>e===t));D(o.attributes),M(!0),U(e)}if("0"!==t&&"0"===e){const e=t,o=l.rows.find((({row_id:t})=>t===e));V(o.attributes),z(!0),U(t)}I(!1)}function tt(e,t,l){let o="";"background"==t&&(o={...e.attributes,bandedRowBackgroundColor:l},Qe(e.table_id,"table","","ATTRIBUTES",o)),"text"==t&&(o={...e.attributes,bandedTextColor:l},Qe(e.table_id,"table","","ATTRIBUTES",o))}(0,i.useEffect)((()=>{be||(qe!=X&&Q(qe),Xe!=Z&&K(Xe))}),[qe,Xe]);const lt=function(e,t,l,o){if(e||t)return;let n="";return o.map((({column_id:e,column_name:t,attributes:l,classes:o})=>{const{columnWidthType:s,minWidth:a,minWidthUnits:r,maxWidth:i,maxWidthUnits:c,fixedWidth:d,fixedWidthUnits:u,disableForTablet:b,disableForPhone:h}=l;let m="";switch(s){case"Proportional":m=a>0?"minmax("+a+r+", "+i+"fr) ":i+"fr ",n+=m;break;case"Auto":n+="auto ";break;case"Fixed":n=n+d+u+" ";break;case"Custom":m="minmax("+a+r+", "+i+c+") ",n+=m;break;default:console.log("Unrecognized Attibute Type")}})),n}(be,ge,0,me.columns),ot=function(e,t,l){if(e||t)return;let o="";return l.map((({row_id:e,attributes:t,classes:l})=>{const{rowHeightType:n,minHeight:s,minHeightUnits:a,maxHeight:r,maxHeightUnits:i,fixedHeight:c,fixedHeightUnits:d,isHeader:u}=t;let b="";if(u)switch(n){case"Auto":o+="auto ";break;case"Fixed":o=o+c+d+" ";break;case"Custom":b="minmax("+s+a+", "+r+i+") ",o+=b;break;default:console.log("Unrecognized Attibute Type")}})),o}(be,ge,me.rows),nt=function(e,t,l){if(e||t)return;let o="";return l.map((({row_id:e,attributes:t,classes:l})=>{const{rowHeightType:n,minHeight:s,minHeightUnits:a,maxHeight:r,maxHeightUnits:i,fixedHeight:c,fixedHeightUnits:d,isHeader:u}=t;let b="";if(!u)switch(n){case"Auto":o+="auto ";break;case"Fixed":o=o+c+d+" ";break;case"Custom":b="minmax("+s+a+", "+r+i+") ",o+=b;break;default:console.log("Unrecognized Attibute Type")}})),o}(be,ge,me.rows),st=G?2:1,at=ke(1,"Header",Z,ye,G,!1),rt=function(e,t){let l=1;return l=e?l+1:l,l=t?l+1:l,l}(ye,G),it=ke(rt,"Body",Z,ye,G,!1),ct=Te?"auto":"hidden",dt=function(e,t,l){if(!e&&!t)return l}(be,ge,ze),ut=function(e,t,l){if(!e&&!t)return l}(be,ge,Fe),bt=function(e,t,l){if(!e&&!t)return l?"solid":"hidden"}(be,ge,ve),ht=function(e,t,l,o){if(!e&&!t)return l?String(o)+"px":"0px"}(be,ge,ve,Ge),mt=Ue?"auto":"hidden",_t=Ue?"grid-control__header--sticky ":"",pt=(t.style.backgroundColor,He(be,ge,Ae)),wt=Pe(Oe),gt=Ie(Oe,"top","color",wt),xt=Ie(Oe,"top","style",wt),ft=Ie(Oe,"top","width",wt),vt=Ie(Oe,"right","color",wt),Tt=Ie(Oe,"right","style",wt),yt=Ie(Oe,"right","width",wt),Ct=Ie(Oe,"bottom","color",wt),Et=Ie(Oe,"bottom","style",wt),Nt=Ie(Oe,"bottom","width",wt),St=Ie(Oe,"left","color",wt),Rt=Ie(Oe,"left","style",wt),jt=Ie(Oe,"left","width",wt),Bt=He(be,ge,De),kt=Pe(Le),Ht=Ie(Le,"top","color",kt),Pt=Ie(Le,"top","style",kt),It=Ie(Le,"top","width",kt),At=Ie(Le,"right","color",kt),Ut=Ie(Le,"right","style",kt),Ot=Ie(Le,"right","width",kt),Dt=Ie(Le,"bottom","color",kt),Lt=Ie(Le,"bottom","style",kt),Mt=Ie(Le,"bottom","width",kt),Wt=Ie(Le,"left","color",kt),zt=Ie(Le,"left","style",kt),Ft=Ie(Le,"left","width",kt);return(0,_.jsxs)("div",{...t,children:[!be&&!ge&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(h.BlockControls,{children:(0,_.jsx)(h.BlockAlignmentToolbar,{value:ne,onChange:t=>e.setAttributes({block_alignment:t})})}),(0,_.jsx)(h.InspectorControls,{children:(0,_.jsxs)(b.Panel,{children:[(0,_.jsxs)(b.PanelBody,{title:"Definition",initialOpen:!0,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("div",{className:"grid-control__inspector-controls--read-only",children:[(0,_.jsx)("span",{className:"grid-control__inspector-controls--read-only-label",children:"Table Name:"}),(Vt=me.table_name,null!==Vt&&""!==Vt&&(Vt=Vt.toString()).replace(/(<([^>]+)>)/gi,""))]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("div",{className:"grid-control__inspector-controls--read-only",children:[(0,_.jsx)("span",{className:"grid-control__inspector-controls--read-only-label",children:"Table Columns/Rows:"}),X,"/",Z]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Show table borders",__nextHasNoMarginBottom:!0,checked:G,onChange:e=>function(e,t){let l,o,n;if(!1===t)Q(X-1),K(Z-1),l=e.rows.filter((e=>"0"!==e.row_id)),o=e.columns.filter((e=>"0"!==e.column_id)),n=e.cells.filter((e=>"0"!==e.row_id&&"0"!==e.column_id)),R(e.table_id,l,o,n);else{Q(X+1),K(Z+1);const t=[];t.push(Ne(le,0,"Border"));const s=[];for(let e=0;e<=X;e++){const t=Re(le,e,0,"Border");s.push(t)}const a=[];a.push(Se(le,0,"Border"));const r=[];for(let e=1;e<=Z;e++){const t=Re(le,0,e,"Border");r.push(t)}l=f("rows",[...e.rows,...t]),o=f("columns",[...e.columns,...a]),n=f("cells",[...e.cells,...s,...r]),R(e.table_id,l,o,n)}J(t),I(!1)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Hide Table Title",__nextHasNoMarginBottom:!0,checked:Ye,onChange:e=>function(e,t){const l={...e.attributes,hideTitle:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]}),(0,_.jsxs)(b.PanelBody,{title:"Table Header",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"First Row as Header?",__nextHasNoMarginBottom:!0,checked:ye,onChange:e=>function(e,t){const l={...e.attributes,enableHeaderRow:t,headerRowSticky:!1};Qe(e.table_id,"table","","ATTRIBUTES",l);const o={...e.rows.find((e=>"1"===e.row_id)).attributes,isHeader:!!t};Qe(e.table_id,"row","1","ATTRIBUTES",o)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Freeze Header Row?",__nextHasNoMarginBottom:!0,disabled:!ye,checked:Ue,onChange:e=>function(e,t){const l={...e.attributes,headerRowSticky:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("span",{className:"inspector-controls-menu__header-alignment--middle",children:[(0,_.jsx)(h.AlignmentControl,{id:"header-alignment",value:Ae,onChange:e=>function(e,t){const l={...e.attributes,headerAlignment:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)}),(0,_.jsx)("label",{className:"inspector-controls-nemu__label--left-margin",htmlFor:"header-alignment",children:"Text Alignment"})]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.BorderBoxControl,{className:"border-box-workaround",__next40pxDefaultSize:!0,__experimentalIsRenderedInSidebar:!0,label:"Borders",isCompact:"true",colors:ae,value:Oe,onChange:e=>function(e,t){const l={...e.attributes,headerBorder:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]}),(0,_.jsxs)(b.PanelBody,{title:"Table Body",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Allow Horizontal Acroll?",__nextHasNoMarginBottom:!0,checked:Te,onChange:e=>function(e,t){const l={...e.attributes,allowHorizontalScroll:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("span",{className:"inspector-controls-menu__header-alignment--middle",children:[(0,_.jsx)(h.AlignmentControl,{id:"body-alignment",value:De,onChange:e=>function(e,t){const l={...e.attributes,bodyAlignment:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)}),(0,_.jsx)("label",{className:"inspector-controls-menu__label--left-margin",htmlFor:"body-alignment",children:"Text Alignment"})]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.BorderBoxControl,{className:"border-box-workaround",label:"Borders",hideLabelFromVision:"false",isCompact:"true",colors:ae,value:Le,onChange:e=>function(e,t){const l={...e.attributes,bodyBorder:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]})]})}),(0,_.jsxs)(h.InspectorControls,{group:"styles",children:[(0,_.jsxs)(b.PanelBody,{title:"Banded Table Rows",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Display Banded Rows",__nextHasNoMarginBottom:!0,checked:We,onChange:e=>function(e,t){const l={...e.attributes,bandedRows:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(h.PanelColorSettings,{__experimentalIsRenderedInSidebar:!0,title:"Banded Row Color",colors:se,colorSettings:[{value:ze,onChange:e=>tt(me,"text",e),label:"Text"},{value:Fe,onChange:e=>tt(me,"background",e),label:"Background"}]})]}),(0,_.jsxs)(b.PanelBody,{title:"Grid Lines",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Display Inner Grid Lines",__nextHasNoMarginBottom:!0,checked:ve,onChange:e=>function(e,t){const l={...e.attributes,showGridLines:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.__experimentalNumberControl,{label:"Inner Grid Line Width",value:Ge,labelPosition:"side",onChange:e=>function(e,t){const l={...e.attributes,gridLineWidth:Number(t)};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]})]}),(0,_.jsx)(h.InspectorControls,{group:"typography"}),(0,_.jsxs)("div",{style:{display:"block"},children:[!Ye&&(0,_.jsx)(h.RichText,{id:"tableTitle",style:{"--gridAlignment":Je},tagName:"p",allowedFormats:["core/bold","core/italic"],onChange:e=>Qe(le,"table_name","","PROP",e),value:me.table_name}),(0,_.jsx)(b.TabbableContainer,{children:(0,_.jsx)("div",{className:"grid-scroller",style:{"--headerRowSticky":mt},children:(0,_.jsxs)("div",{className:"grid-control "+_t,style:{"--gridTemplateColumns":lt,"--horizontalScroll":ct,"--headerRowSticky":mt,"--gridNumColumns":X,"--gridNumRows":Z,"--gridAlignment":Je},children:[G&&(0,_.jsx)("div",{className:"grid-control__border",children:me.cells.filter((e=>e.attributes.border&&"0"===e.row_id)).map((({table_id:e,row_id:t,column_id:l,cell_id:o,content:n,classes:s})=>{const a=v(t,l,n),r=function(e,t,l){return!(!e||t!==l)}(L,A,l),i="1"===l;return(0,_.jsxs)(_.Fragment,{children:[i&&te,(0,_.jsxs)("div",{id:o,onMouseDown:e=>et(l,t,me),className:s,children:[a,r&&(0,_.jsx)(Me,{tableId:e,columnId:l,columnLabel:a,columnAttributes:O,enableProFeatures:!1,updatedColumn:Ke})]})]})}))}),me.rows.filter((e=>!0===e.attributes.isHeader)).map((({row_id:e})=>{const t=e;return(0,_.jsx)("div",{className:"grid-control__header",style:{"--gridTemplateHeaderRows":ot,"--startGridHeaderRowNbr":st,"--endGridHeaderRowNbr":at,"--headerBorderTopColor":gt,"--headerBorderTopStyle":xt,"--headerBorderTopWidth":ft,"--headerBorderRightColor":vt,"--headerBorderRightStyle":Tt,"--headerBorderRightWidth":yt,"--headerBorderBottomColor":Ct,"--headerBorderBottomStyle":Et,"--headerBorderBottomWidth":Nt,"--headerBorderLeftColor":St,"--headerBorderLeftStyle":Rt,"--headerBorderLeftWidth":jt,"--headerTextAlignment":pt},children:me.cells.filter((e=>e.row_id===t)).map((({table_id:e,row_id:t,column_id:l,cell_id:o,content:n,attributes:s,classes:a})=>{const r="1"===l,i=s.border,c=v(t,l,n),d=T(W,A,t),u=bt,b=ht;return(0,_.jsxs)(_.Fragment,{children:[r&&i&&te,i&&(0,_.jsxs)("div",{id:o,onMouseDown:e=>et(l,t,me),className:a,children:[c,d&&(0,_.jsx)(Ve,{tableId:e,rowId:t,rowLabel:c,rowAttributes:F,updatedRow:$e})]}),r&&te,!i&&(0,_.jsx)(h.RichText,{id:o,className:"grid-control__header-cells",style:{"--showGridLines":u,"--gridLineWidth":b},tabIndex:"0",tagName:"div",onChange:t=>Qe(e,"cell",o,"CONTENT",t),value:n})]})}))})})),(0,_.jsx)("div",{className:"grid-control__body",style:{"--gridTemplateBodyRows":nt,"--startGridBodyRowNbr":rt,"--endGridBodyRowNbr":it,"--bodyBorderTopColor":Ht,"--bodyBorderTopStyle":Pt,"--bodyBorderTopWidth":It,"--bodyBorderRightColor":At,"--bodyBorderRightStyle":Ut,"--bodyBorderRightWidth":Ot,"--bodyBorderBottomColor":Dt,"--bodyBorderBottomStyle":Lt,"--bodyBorderBottomWidth":Mt,"--bodyBorderLeftColor":Wt,"--bodyBorderLeftStyle":zt,"--bodyBorderLeftWidth":Ft,"--bodyTextAlignment":Bt},children:me.rows.filter((e=>!0!==e.attributes.isHeader&&"0"!==e.row_id)).map((({row_id:e})=>{const t=e;let l="";const o=ye?1:0;return We&&0==o&&Number(e)%2==0&&(l+="grid-control__body-rows--banded-row "),We&&1==o&&Number(e)>1&&(Number(e)+o)%2==0&&(l+="grid-control__body-rows--banded-row "),(0,_.jsx)("div",{className:"grid-control__body-row "+l,style:{"--bandedRowTextColor":dt,"--bandedRowBackgroundColor":ut},children:me.cells.filter((e=>e.row_id===t)).map((({table_id:e,row_id:t,column_id:l,cell_id:o,content:n,attributes:s,classes:a})=>{const r="1"===l,i=s.border,c=v(t,l,n),d=T(W,A,t),u=bt,b=ht;return(0,_.jsxs)(_.Fragment,{children:[r&&i&&te,i&&(0,_.jsxs)("div",{id:o,onMouseDown:e=>et(l,t,me),className:a,children:[c,d&&(0,_.jsx)(Ve,{tableId:e,rowId:t,rowLabel:c,rowAttributes:F,updatedRow:$e})]}),r&&!i&&te,!i&&(0,_.jsx)(h.RichText,{id:o,className:"grid-control__body-cells "+a,style:{"--showGridLines":u,"--gridLineWidth":b},tabIndex:"0",tagName:"div",onChange:t=>Qe(e,"cell",o,"CONTENT",t),value:n})]})}))})}))})]})})})]})]}),!be&&ge&&(0,_.jsx)(b.Spinner,{children:"Retrieving Table Data"}),be&&(0,_.jsx)(b.Placeholder,{label:(0,u.__)("Dynamic Table"),icon:(0,_.jsx)(h.BlockIcon,{icon:p,showColors:!0}),instructions:(0,u.__)("Create a new dynamic table."),children:(0,_.jsxs)("form",{className:"blocks-table__placeholder-form",onSubmit:function(e){e.preventDefault(),Ze(X,Z,Y)},children:[(0,_.jsx)(b.__experimentalInputControl,{label:(0,u.__)("Table Name"),placeholder:"New Table",required:"true",onChange:e=>q(e),value:Y,className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.__experimentalNumberControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Table Columns"),min:1,required:"true",value:X,onChange:e=>function(e){let t=e;e<1||e>50?(k("error","Cannot have "+e+" columns.  You must have at least 1 and no more than 50 columns.",{id:"invalidNumColumns",isDismissible:!0,politeness:"assertive"}),t=Number(X)):H("invalidNumColumns"),Q(t)}(e),className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.__experimentalNumberControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Table Rows"),required:"true",min:1,value:Z,onChange:e=>function(e){let t=e;e<1||e>1e3?(k("error","Cannot have "+e+" rows.  You must have at least 1 and no more than 1,000 rows.",{id:"invalidNumRows",isDismissible:!0,politeness:"assertive"}),t=Number(Z)):H("invalidNumRows"),K(t)}(e),className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.Button,{className:"blocks-table__placeholder-button",variant:"primary",type:"submit",children:(0,u.__)("Create Table")})]})})]});var Vt},save:e=>null})}},l={};function o(e){var n=l[e];if(void 0!==n)return n.exports;var s=l[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,l,n,s)=>{if(!l){var a=1/0;for(d=0;d<e.length;d++){for(var[l,n,s]=e[d],r=!0,i=0;i<l.length;i++)(!1&s||a>=s)&&Object.keys(o.O).every((e=>o.O[e](l[i])))?l.splice(i--,1):(r=!1,s<a&&(a=s));if(r){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,n,s]},o.d=(e,t)=>{for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,l)=>{var n,s,[a,r,i]=l,c=0;if(a.some((t=>0!==e[t]))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(i)var d=i(o)}for(t&&t(l);c<a.length;c++)s=a[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},l=globalThis.webpackChunkdynamic_tables=globalThis.webpackChunkdynamic_tables||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=o.O(void 0,[350],(()=>o(665)));n=o.O(n)})();