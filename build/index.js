(()=>{"use strict";var e,t={665:(e,t,l)=>{var n={};l.r(n),l.d(n,{getDeletedTables:()=>W,getTable:()=>U,getTableIdByBlock:()=>D,getTables:()=>L,getUnmountedTables:()=>M,getUnsavedTables:()=>F});var o={};l.r(o),l.d(o,{addColumn:()=>be,addRow:()=>he,assignTableId:()=>pe,createTableEntity:()=>ae,deleteTableEntity:()=>ce,processDeletedTables:()=>de,processUnmountedTables:()=>ue,receiveNewTable:()=>oe,receiveTable:()=>se,removeColumn:()=>me,removeRow:()=>_e,removeTableProp:()=>ge,saveTableEntity:()=>re,updateCell:()=>ve,updateColumn:()=>fe,updateRow:()=>xe,updateTableBorder:()=>Te,updateTableEntity:()=>ie,updateTableProp:()=>we});var s={};l.r(s),l.d(s,{getTable:()=>Ce});const a=window.wp.blocks,r=window.wp.data,i=window.wp.element,c=window.wp.editor,d=window.wp.notices,u=window.wp.i18n,b=window.wp.components,h=window.wp.blockEditor,m=window.wp.primitives,_=window.ReactJSXRuntime,p=(m.SVG,m.Path,(0,_.jsx)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)(m.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})})),w={CREATE_TABLE:"CREATE_TABLE",INSERT_COLUMN:"INSERT_COLUMN",INSERT_ROW:"INSERT_ROW",DELETE_TABLE:"DELETE_TABLE",DELETE_COLUMN:"DELETE_COLUMN",DELETE_ROW:"DELETE_ROW",CHANGE_TABLE_ID:"CHANGE_TABLE_ID",UPDATE_TABLE_PROP:"UPDATE_TABLE_PROP",REMOVE_TABLE_PROP:"REMOVE_TABLE_PROP",UPDATE_ROW:"UPDATE_ROW",UPDATE_COLUMN:"UPDATE_COLUMN",UPDATE_CELL:"UPDATE_CELL",RECEIVE_HYDRATE:"RECEIVE_HYDRATE",RECEIVE_HYDRATE_TEST:"RECEIVE_HYDRATE_TEST",PERSIST:"PERSIST",PROCESS_BORDERS:"PROCESS_BORDERS"};function g(e){const t=[{nbr:"1",letter:"A"},{nbr:"2",letter:"B"},{nbr:"3",letter:"C"},{nbr:"4",letter:"D"},{nbr:"5",letter:"E"},{nbr:"6",letter:"F"},{nbr:"7",letter:"G"},{nbr:"8",letter:"H"},{nbr:"9",letter:"I"},{nbr:"a",letter:"J"},{nbr:"b",letter:"k"},{nbr:"c",letter:"L"},{nbr:"d",letter:"M"},{nbr:"e",letter:"N"},{nbr:"f",letter:"O"},{nbr:"g",letter:"P"},{nbr:"h",letter:"Q"},{nbr:"i",letter:"R"},{nbr:"j",letter:"S"},{nbr:"k",letter:"T"},{nbr:"l",letter:"U"},{nbr:"m",letter:"V"},{nbr:"n",letter:"W"},{nbr:"o",letter:"X"},{nbr:"p",letter:"Y"},{nbr:"q",letter:"Z"}];if(0===e)return"0";const l=e.toString(26).split("");let n="";return l.map((e=>{n+=t.find((t=>t.nbr===e)).letter})),n}function x(e,t,l,n){return e.map((e=>e[t]===l?{...e,...n}:e))}function f(e,t){if("rows"===e){const e=[...t];return e.sort(((e,t)=>Number([e.row_id])<Number([t.row_id])?-1:1)),e}if("columns"===e){const e=[...t];return e.sort(((e,t)=>Number([e.column_id])<Number([t.column_id])?-1:1)),e}if("cells"===e){const e=[...t];return e.sort(((e,t)=>Number([e.row_id])===Number([t.row_id])?Number([e.column_id])<Number([t.column_id])?-1:1:Number([e.row_id])<Number([t.row_id])?-1:1)),e}}function v(e,t,l){return"0"===e&&"0"===t?"":l}function T(e,t,l){return!(!e||t!==l)}const{CREATE_TABLE:C,INSERT_COLUMN:y,INSERT_ROW:N,DELETE_TABLE:S,DELETE_COLUMN:E,DELETE_ROW:R,CHANGE_TABLE_ID:j,UPDATE_TABLE_PROP:B,REMOVE_TABLE_PROP:H,UPDATE_ROW:P,UPDATE_COLUMN:k,UPDATE_CELL:I,RECEIVE_HYDRATE:A,PROCESS_BORDERS:O}=w;function U(e,t,l){return e.tables.hasOwnProperty(t)?e.tables[t]:{table_id:t,block_table_ref:"",post_id:"",table_status:"",table_name:"",attributes:[],classes:"",rows:[],columns:[],cells:[]}}function L(e){return e.tables}function D(e,t){const l=Object.keys(e.tables).reduce(((l,n)=>(e.tables[n]?.block_table_ref===t&&(l[n]={...e.tables[n]}),l)),{});return 0!==l.length&&Object.keys(l)}function M(e){return Object.keys(e.tables).reduce(((t,l)=>(e.tables[l].unmounted_blockid&&(t[l]={...e.tables[l]}),t)),{})}function W(e){return Object.keys(e.tables).reduce(((t,l)=>("deleted"===e.tables[l].table_status&&(t[l]={...e.tables[l]}),t)),{})}function F(e){return Object.keys(e.tables).reduce(((t,l)=>("new"===e.tables[l].table_status&&(t[l]={...e.tables[l]}),t)),{})}const V=window.wp.coreData,{CREATE_TABLE:z,INSERT_COLUMN:G,INSERT_ROW:J,DELETE_TABLE:Y,DELETE_COLUMN:q,DELETE_ROW:X,CHANGE_TABLE_ID:Q,UPDATE_TABLE_PROP:Z,REMOVE_TABLE_PROP:K,UPDATE_ROW:$,UPDATE_COLUMN:ee,UPDATE_CELL:te,RECEIVE_HYDRATE:le,PROCESS_BORDERS:ne}=w;function oe(e){return{type:z,tableId:e.table.table_id,...e}}function se(e,t,l,n,o,s,a,r,i,c){return{type:le,tableId:e,table:{table_id:e,block_table_ref:t,table_status:l,post_id:n,table_name:o,attributes:s,classes:a,rows:r,columns:i,cells:c}}}const ae=()=>async({select:e,dispatch:t,registry:l})=>{const{table_id:n,block_table_ref:o,post_id:s,table_name:a,attributes:r,classes:i,rows:c,columns:d,cells:u}=e.getTable("0",!0),b={title:a,header:{id:n,block_table_ref:o,status:"new",post_id:s,table_name:a,attributes:r,classes:i},rows:[...c],columns:[...d],cells:[...u]};try{const e=await l.dispatch(V.store).saveEntityRecord("dynamic-tables","table",b);return t.assignTableId(e.id),e.id}catch(e){}},re=e=>({registry:t})=>{try{t.dispatch(V.store).saveEditedEntityRecord("dynamic-tables","table",e)}catch(t){alert("            ...Save Table Entity - async error - "+t)}},ie=(e,t="")=>({select:l,registry:n})=>{const{table_id:o,block_table_ref:s,table_status:a,post_id:r,table_name:i,attributes:c,classes:d,rows:u,columns:b,cells:h}=l.getTable(e,!1),m=u.filter((e=>"0"!==e.row_id)),_=b.filter((e=>"0"!==e.column_id)),p=h.filter((e=>"0"!==e.row_id&&"0"!==e.column_id)).map((({table_id:e,column_id:t,row_id:l,attributes:n,classes:o,content:s})=>({table_id:e,column_id:t,row_id:l,attributes:n,classes:o,content:s}))),w={id:e,title:i,header:{id:o,block_table_ref:s,status:((e,t)=>e||t)(t,a),post_id:r,table_name:i,attributes:c,classes:d},rows:[...m],columns:[..._],cells:[...p]};try{n.dispatch(V.store).editEntityRecord("dynamic-tables","table",o,w)}catch(e){alert("            ...Update Table Entity - async error - "+e)}},ce=e=>async({select:t,dispatch:l,registry:n})=>{try{await n.dispatch(V.store).deleteEntityRecord("dynamic-tables","table",e),l({type:Y,tableId:e})}catch(t){alert("            ...Resolver - async error - "+t)}},de=e=>({dispatch:t})=>{Object.keys(e).forEach((l=>{t.deleteTableEntity(e[l].table_id)}))},ue=e=>({dispatch:t,registry:l})=>{Object.keys(e).forEach((n=>{const o=e[n].unmounted_blockid,s=e[n].prior_status;l.select(h.store).getBlock(o)?(t.updateTableProp(e[n].table_id,"table_status"),t.updateTableProp(e[n].table_id,"table_status",s),t.removeTableProp(e[n].table_id,"unmounted_blockid"),t.removeTableProp(e[n].table_id,"prior_status"),t.updateTableEntity(e[n].table_id)):(t.updateTableProp(e[n].table_id,"table_status","deleted"),t.removeTableProp(e[n].table_id,"unmounted_blockid"))}))},be=(e,t,l,n)=>({type:G,tableId:e,columnId:t,newColumn:l,columnCells:n}),he=(e,t,l,n)=>({type:J,tableId:e,rowId:t,newRow:l,rowCells:n}),me=(e,t)=>({type:q,tableId:e,columnId:t}),_e=(e,t)=>({type:X,tableId:e,rowId:t}),pe=e=>({type:Q,tableId:"0",newTableId:String(e)}),we=(e,t,l)=>({type:Z,tableId:e,attribute:t,value:l}),ge=(e,t)=>({type:K,tableId:e,attribute:t}),xe=(e,t,l,n)=>({type:$,tableId:e,rowId:t,attribute:l,value:n}),fe=(e,t,l,n)=>({type:ee,tableId:e,columnId:t,attribute:l,value:n}),ve=(e,t,l,n)=>({type:te,tableId:e,cellId:t,attribute:l,value:n}),Te=(e,t,l,n)=>async({dispatch:o})=>{await o({type:ne,tableId:e,rows:t,columns:l,cells:n})},Ce=(e,t)=>async({dispatch:l,registry:n})=>{if(t&&"0"!=e)try{const t=await n.resolveSelect(V.store).getEntityRecord("dynamic-tables","table",e),o=t.id,s=t.header.block_table_ref,a=t.header.status,r=t.header.post_id,i=t.header.table_name,c=t.header.attributes,d=t.header.classes,u=t.rows,b=t.columns;t.cells.forEach((e=>{e.cell_id=g(e.column_id)+e.row_id}));const h=t.cells;l.receiveTable(o,s,a,r,i,c,d,u,b,h)}catch(e){alert("            ...Resolver - async error - "+JSON.stringify(e,null,4))}},ye=(0,r.createReduxStore)("dynamic-tables/table",{reducer:(e={tables:{}},t)=>{const l=t.tableId,n=((e={table:{}},t)=>{switch(t.type){case C:return{table:{...t.table}};case j:const l={...e},n=[],o=[],s=[];return l.rows.forEach((e=>{const l={...e,table_id:t.newTableId};n.push(l)})),l.columns.forEach((e=>{const l={...e,table_id:t.newTableId};o.push(l)})),l.cells.forEach((e=>{const l={...e,table_id:t.newTableId};s.push(l)})),{table:{...e,table_id:t.newTableId,rows:[...n],columns:[...o],cells:[...s]}};case B:return{table:{...e,[t.attribute]:t.value}};case H:const a={...e};return delete a[t.attribute],{table:a};case y:const r={...e},i=[];r.columns.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))i.push(e);else{const t={table_id:e.table_id,column_id:String(Number(e.column_id)+1),column_name:e.column_name,attributes:e.attributes,classes:e.classes};i.push(t)}})),i.push(t.newColumn);const c=f("columns",i),d=[];r.cells.forEach((e=>{if(e.column_id<t.columnId)d.push(e);else{const t=String(Number(e.column_id)+1),l=g(t),n=0==Number(e.row_id)?l:e.content,o={table_id:e.table_id,column_id:t,row_id:e.row_id,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:n};d.push(o)}}));const u=f("cells",[...d,...t.columnCells]);return{table:{...r,rows:[...r.rows],columns:[...c],cells:[...u]}};case N:const b={...e},h=[];b.rows.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))h.push(e);else{const t={table_id:e.table_id,row_id:String(Number(e.row_id)+1),attributes:e.attributes,classes:e.classes};h.push(t)}})),h.push(t.newRow);const m=f("rows",h),_=[];b.cells.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))_.push(e);else{const t=String(Number(e.row_id)+1),l="0"==e.column_id?"0":g(e.column_id),n=0==Number(e.column_id)?t:e.content,o={table_id:e.table_id,column_id:e.column_id,row_id:t,cell_id:l+t,attributes:e.attributes,classes:e.classes,content:n};_.push(o)}}));const p=f("cells",[..._,...t.rowCells]);return{table:{...b,rows:[...m],columns:[...b.columns],cells:[...p]}};case E:const w={...e},v=[];w.columns.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))v.push(e);else if(Number(e.column_id)>Number(t.columnId)){const t={table_id:e.table_id,column_id:String(Number(e.column_id)-1),column_name:e.column_name,attributes:e.attributes,classes:e.classes};v.push(t)}}));const T=[];return w.cells.forEach((e=>{if(Number(e.column_id)<Number(t.columnId))T.push(e);else if(Number(e.column_id)>Number(t.columnId)){const t=String(Number(e.column_id)-1),l=g(t),n=0==Number(e.row_id)?l:e.content,o={table_id:e.table_id,column_id:t,row_id:e.row_id,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:n};T.push(o)}})),{table:{...w,rows:[...w.rows],columns:[...v],cells:[...T]}};case R:const S={...e},U=[];S.rows.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))U.push(e);else if(Number(e.row_id)>Number(t.rowId)){const t={table_id:e.table_id,row_id:String(Number(e.row_id)-1),attributes:e.attributes,classes:e.classes};U.push(t)}}));const L=[];return S.cells.forEach((e=>{if(Number(e.row_id)<Number(t.rowId))L.push(e);else if(Number(e.row_id)>Number(t.rowId)){const t=String(Number(e.row_id)-1),l="0"==e.column_id?"0":g(e.column_id),n=0==Number(e.column_id)?t:e.content,o={table_id:e.table_id,column_id:e.column_id,row_id:t,cell_id:l+e.row_id,attributes:e.attributes,classes:e.classes,content:n};L.push(o)}})),{table:{...S,rows:[...U],columns:[...S.columns],cells:[...L]}};case P:let D=' "'+t.value+'"';"attributes"===t.attribute&&(D=JSON.stringify(t.value));const M={...e},W=JSON.parse('{ "'+t.attribute+'" :'+D+"}"),F=x(M.rows,"row_id",t.rowId,W);return{table:{...M,rows:[...F],columns:[...M.columns],cells:[...M.cells]}};case k:let V=' "'+t.value+'"';"attributes"===t.attribute&&(V=JSON.stringify(t.value));const z={...e},G=JSON.parse('{ "'+t.attribute+'" :'+V+"}"),J=x(z.columns,"column_id",t.columnId,G);return{table:{...z,rows:[...z.rows],columns:[...J],cells:[...z.cells]}};case I:const Y={...e},q=JSON.parse('{ "'+t.attribute+'" : "'+t.value+'"}'),X=x(Y.cells,"cell_id",t.cellId,q);return{table:{...e,rows:[...Y.rows],columns:[...Y.columns],cells:[...X]}};case O:return{table:{...{...e},rows:f("rows",[...t.rows]),columns:f("columns",[...t.columns]),cells:f("cells",[...t.cells])}};case A:return{table:{...e.table,...t.table}};default:return e}})(e.tables[l],t);if("{}"===JSON.stringify(n.table))return e;const o={...e.tables};switch(t.type){case j:const l={[t.newTableId]:n.table};return{tables:{...Object.keys(e.tables).reduce(((l,n)=>(e.tables[n].table_id!==t.tableId&&(l[n]={...e.tables[n]}),l)),{}),...l}};case S:return{tables:{...Object.keys(e.tables).reduce(((l,n)=>(n!==String(t.tableId)&&(l[n]={...e.tables[n],rows:[...e.tables[n].rows],columns:[...e.tables[n].columns],cells:[...e.tables[n].cells]}),l)),{})}};default:return{tables:{...o,[t.tableId]:n.table}}}},selectors:n,actions:o,resolvers:s});(0,r.register)(ye);const Ne=window.wp.compose;function Se(e,t,l="Body"){let n;return n={table_id:String(e),row_id:String(t),attributes:je("rows",l),classes:Be("rows")},n}function Ee(e,t,l="Body"){let n;return n="Border"===l?{table_id:String(e),column_id:String(t),column_name:"Border",attributes:je("columns",l),classes:""}:{table_id:String(e),column_id:String(t),column_name:"Comments",attributes:je("columns",l),classes:Be("columns")},n}function Re(e,t,l,n="Body"){let o;const s=g(t),a=0==l?s:String(l);return o="Border"===n?{table_id:String(e),column_id:String(t),row_id:String(l),cell_id:0===l?s+"0":"0"+String(t),attributes:je("cells",n),classes:"grid-control__border-cells hover",content:a}:{table_id:String(e),column_id:String(t),row_id:String(l),cell_id:s+l,attributes:je("cells",n),classes:Be("cells"),content:""},o}function je(e,t="Body"){const l={showGridLines:!0,bandedRows:!1,bandedRowBackgroundColor:"#d8dbda",bandedTextColor:"#d8dbda",gridLineWidth:1,allowHorizontalScroll:!0,enableHeaderRow:!1,headerAlignment:"center",headerRowSticky:!1,headerBorder:{color:"black",style:"solid",width:"1px"},horizontalAlignment:"none",bodyAlignment:void 0,bodyBorder:{color:"black",style:"solid",width:"1px"},verticalAlignment:"none",hideTitle:!0},n={columnWidthType:"Proportional",minWidth:2,minWidthUnits:"ch",maxWidth:1,maxWidthUnits:"fr",fixedWidth:1,fixedWidthUnits:"fr",disableForTablet:!1,disableForPhone:!1,isFixedLeftColumnGroup:!1,horizontalAlignment:"none"},o={columnWidthType:"Fixed",minWidth:0,minWidthUnits:"",maxWidth:0,maxWidthUnits:"",fixedWidth:20,fixedWidthUnits:"px",disableForTablet:!1,disableForPhone:!1,isFixedLeftColumnGroup:!1,horizontalAlignment:"center"},s={rowHeightType:"Auto",minHeight:0,minHeightUnits:"em",maxHeight:0,maxHeightUnits:"em",fixedHeight:0,fixedHeightUnits:"em",isHeader:!1,verticalAlignment:"none"},a={rowHeightType:"Auto",minHeight:0,minHeightUnits:"em",maxHeight:0,maxHeightUnits:"em",fixedHeight:0,fixedHeightUnits:"em",isHeader:!1,verticalAlignment:"none"},r={border:!1},i={border:!0};switch(e){case"table":return l;case"columns":return"Border"===t?o:n;case"rows":return"Border"===t?a:s;case"cells":return"Border"===t?i:r}}function Be(e){switch(e){case"table":case"columns":case"rows":case"cells":return""}}function He(e,t,l,n,o,s){let a;switch(t){case"Header":a=2,a=o?a++:a;break;case"Body":a=e+l,a=o?a++:a,a=n?a-1:a,a=s?a-1:a}return a}function Pe(e,t,l){if(!e&&!t)return l}function ke(e){if(e){const t=Object.entries(e);for(let e=0;e<t.length;e++)if(t[e].some((e=>"object"==typeof e)))return"split";return"flat"}return"unknown"}function Ie(e,t,l,n){switch(n){case"split":return e[t][l];case"flat":return e[l];default:switch(l){case"color":return"black";case"style":return"solid";case"width":return"1px"}}}const Ae=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(m.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})}),Oe=(0,_.jsxs)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,_.jsx)(m.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,_.jsx)(m.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]}),Ue=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.4 3.776v3.648H2.752v1.792H6.4v3.648h1.728V9.216h3.712V7.424H8.128V3.776zM0 17.92V0h20.48v17.92H0zM12.8 1.28H1.28v14.08H12.8V1.28zm6.4 0h-5.12v3.84h5.12V1.28zm0 5.12h-5.12v3.84h5.12V6.4zm0 5.12h-5.12v3.84h5.12v-3.84z"})}),Le=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.4 9.98L7.68 8.7v-.256L6.4 7.164V9.98zm6.4-1.532l1.28-1.28V9.92L12.8 8.64v-.192zm7.68 9.472V0H0v17.92h20.48zm-1.28-2.56h-5.12v-1.024l-.256.256-1.024-1.024v1.792H7.68v-1.792l-1.024 1.024-.256-.256v1.024H1.28V1.28H6.4v2.368l.704-.704.576.576V1.216h5.12V3.52l.96-.96.32.32V1.216h5.12V15.36zm-5.76-2.112l-3.136-3.136-3.264 3.264-1.536-1.536 3.264-3.264L5.632 5.44l1.536-1.536 3.136 3.136 3.2-3.2 1.536 1.536-3.2 3.2 3.136 3.136-1.536 1.536z"})});function De(e){const{openColumnWidth:t,columnLabel:l,columnAttributes:n,enableProFeatures:o}=e;function s(e){t(!1)}(0,i.useEffect)((()=>{switch(n.columnWidthType){case"Proportional":d(!1),h(!0),p(!0);break;case"Auto":d(!0),h(!0),p(!0);break;case"Fixed":d(!0),h(!0),p(!1);break;case"Custom":d(!0),h(!1),p(!0)}r(n.columnWidthType),g(n.minWidth),f(n.minWidthUnits),T(n.maxWidth),y(n.maxWidthUnits),S(n.fixedWidth),R(n.fixedWidth),P(n.disableForPhone),B(n.disableForTablet)}),[n]);const[a,r]=(0,i.useState)(),[c,d]=(0,i.useState)(!0),[u,h]=(0,i.useState)(!0),[m,p]=(0,i.useState)(!0),[w,g]=(0,i.useState)(0),[x,f]=(0,i.useState)(),[v,T]=(0,i.useState)(1),[C,y]=(0,i.useState)(),[N,S]=(0,i.useState)(0),[E,R]=(0,i.useState)(),[j,B]=(0,i.useState)(!1),[H,P]=(0,i.useState)(!1);function k(e){g(e.target.value)}function I(e){f(e)}function A(e){T(e.target.value)}return(0,_.jsx)(_.Fragment,{children:t&&(0,_.jsxs)(b.Modal,{title:"Configure Column Width",onRequestClose:s,focusOnMount:"firstContentElement",isDismissible:"false",shouldCloseOnClickOutside:"false",size:"large",children:[(0,_.jsxs)("p",{className:"column-label",children:["For column ",l]}),(0,_.jsxs)("form",{onSubmit:function(e){const l={columnWidthType:a,minWidth:w,minWidthUnits:x,maxWidth:Number(v),maxWidthUnits:C,fixedWidth:N,fixedWidthUnits:E,disableForTablet:j,disableForPhone:H,isFixedLeftColumnGroup:!1,horizontalAlignment:"none"};t(!1,l)},onMouseDown:function(e){e.stopPropagation()},children:[(0,_.jsx)(b.SelectControl,{label:"Width Type",value:a,onChange:e=>function(e){switch(e){case"Proportional":T(1),y("fr"),g(20),f("ch"),S(0),R("px"),d(!1),h(!0),p(!0);break;case"Auto":T(0),y("fr"),g(0),f("ch"),S(0),R("px"),d(!0),h(!0),p(!0);break;case"Fixed":T(0),y("fr"),g(0),f("ch"),S(40),R("px"),d(!0),h(!0),p(!1);break;case"Custom":T(40),y("ch"),g(20),f("ch"),S(0),R("px"),d(!0),h(!1),p(!0)}r(e)}(e),options:[{value:"Proportional",label:"Proportional"},{value:"Auto",label:"Automatic"},{value:"Fixed",label:"Fixed width"},{value:"Custom",label:"Custom"}],__nextHasNoMarginBottom:!0}),(0,_.jsxs)("fieldset",{className:!0===c?" column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Proportional Width"}),(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-value-input",label:"Number of portions",labelPosition:"side",onBlur:e=>A(e),value:v}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-value-input",label:"Minimum width",labelPosition:"left",value:w,onBlur:e=>k(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:x,onChange:e=>I(e),options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===m?"column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Fixed Width"}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Fixed width",labelPosition:"left",value:N,onBlur:e=>{S(Number(e.target.value))}}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",label:"Units",labelPosition:"left",value:E,onChange:e=>{R(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"font"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===u?"column-width--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Custom Width"}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Minimum width",labelPosition:"left",value:w,onBlur:e=>k(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:x,onChange:e=>I(e),options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]}),(0,_.jsxs)("span",{className:"column-width-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"column-width-input",label:"Maximum width",labelPosition:"left",value:v,onBlur:e=>A(e)}),(0,_.jsx)(b.SelectControl,{className:"column-width-unit-input",labelPosition:"left",label:"Units",value:C,onChange:e=>{y(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),o&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.CheckboxControl,{label:"Hide for tablet",checked:j,onChange:function(e){B(e)}}),(0,_.jsx)(b.CheckboxControl,{label:"Hide for phone",checked:H,onChange:function(e){P(e)}})]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(b.Button,{variant:"secondary",onClick:s,children:"Cancel"}),(0,_.jsx)(b.Button,{variant:"primary",type:"submit",children:"Update"})]})]})]})})}function Me(e){const[t,l]=(0,i.useState)(!1),[n,o]=(0,i.useState)({}),{tableId:s,columnId:a,columnLabel:r,enableProFeatures:c,updatedColumn:d}=e;function u(e,n){t?(l(!1),d(e,"attributes",s,a,n)):(e.preventDefault(),l(!0))}return(0,i.useEffect)((()=>{o(e.columnAttributes)}),[e.columnAttributes]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.DropdownMenu,{icon:Ae,defaultOpen:"true",label:r,children:({onClose:e})=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.MenuGroup,{children:(0,_.jsx)(b.MenuItem,{icon:Oe,onClick:u,children:"Update Column Width"})}),(0,_.jsxs)(b.MenuGroup,{children:[(0,_.jsx)(b.MenuItem,{icon:Ue,onClick:e=>function(e,t){d(e,"insert",s,t,"")}(e,a),children:"Insert Column"}),(0,_.jsx)(b.MenuItem,{icon:Le,onClick:e=>function(e,t){d(e,"delete",s,t,"")}(e,a),children:"Delete Column"})]})]})}),t&&(0,_.jsx)(De,{columnId:a,columnLabel:r,columnAttributes:n,enableProFeatures:c,openColumnWidth:u})]})}const We=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M6.656 6.464h2.88v2.88h1.408v-2.88h2.88V5.12h-2.88V2.24H9.536v2.88h-2.88zM0 17.92V0h20.48v17.92H0zm7.68-2.56h5.12v-3.84H7.68v3.84zm-6.4 0H6.4v-3.84H1.28v3.84zM19.2 1.28H1.28v9.024H19.2V1.28zm0 10.24h-5.12v3.84h5.12v-3.84zM6.656 6.464h2.88v2.88h1.408v-2.88h2.88V5.12h-2.88V2.24H9.536v2.88h-2.88zM0 17.92V0h20.48v17.92H0zm7.68-2.56h5.12v-3.84H7.68v3.84zm-6.4 0H6.4v-3.84H1.28v3.84zM19.2 1.28H1.28v9.024H19.2V1.28zm0 10.24h-5.12v3.84h5.12v-3.84z"})}),Fe=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,_.jsx)(m.Path,{d:"M17.728 11.456L14.592 8.32l3.2-3.2-1.536-1.536-3.2 3.2L9.92 3.648 8.384 5.12l3.2 3.2-3.264 3.264 1.536 1.536 3.264-3.264 3.136 3.136 1.472-1.536zM0 17.92V0h20.48v17.92H0zm19.2-6.4h-.448l-1.28-1.28H19.2V6.4h-1.792l1.28-1.28h.512V1.28H1.28v3.84h6.208l1.28 1.28H1.28v3.84h7.424l-1.28 1.28H1.28v3.84H19.2v-3.84z"})});function Ve(e){const{openRowHeight:t,rowLabel:l,rowAttributes:n}=e;function o(e){t(!1)}(0,i.useEffect)((()=>{switch(n.rowHeightType){case"Auto":c(!0),u(!0);break;case"Fixed":c(!0),u(!1);break;case"Custom":c(!1),u(!0)}a(n.rowHeightType),m(n.minHeight),w(n.minHeightUnits),x(n.maxHeight),v(n.maxHeightUnits),C(n.fixedHeight),N(n.fixedHeightUnits)}),[n]);const[s,a]=(0,i.useState)(),[r,c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(!0),[h,m]=(0,i.useState)(0),[p,w]=(0,i.useState)(),[g,x]=(0,i.useState)(1),[f,v]=(0,i.useState)(),[T,C]=(0,i.useState)(0),[y,N]=(0,i.useState)();return(0,_.jsx)(_.Fragment,{children:t&&(0,_.jsxs)(b.Modal,{title:"Configure Row Height",onRequestClose:o,focusOnMount:"firstContentElement",isDismissible:"false",shouldCloseOnClickOutside:"false",size:"large",children:[(0,_.jsxs)("p",{className:"row-label",children:["For row ",l]}),(0,_.jsxs)("form",{onSubmit:function(e){const l={rowHeightType:s,minHeight:h,minHeightUnits:p,maxHeight:Number(g),maxHeightUnits:f,fixedHeight:T,fixedHeightUnits:y,isFixedLeftRowGroup:!1,horizontalAlignment:"none"};t(!1,l)},onMouseDown:function(e){e.stopPropagation()},children:[(0,_.jsx)(b.SelectControl,{label:"Height Type",value:s,onChange:e=>function(e){switch(e){case"Auto":x(0),v("fr"),m(0),w("ch"),C(0),N("px"),c(!0),u(!0);break;case"Fixed":x(0),v("fr"),m(0),w("ch"),C(40),N("px"),c(!0),u(!1);break;case"Custom":x(40),v("ch"),m(20),w("ch"),C(0),N("px"),c(!1),u(!0)}a(e)}(e),options:[{value:"Auto",label:"Automatic"},{value:"Fixed",label:"Fixed height"},{value:"Custom",label:"Custom"}],__nextHasNoMarginBottom:!0}),(0,_.jsxs)("fieldset",{className:!0===d?"row-height--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Fixed Height"}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Fixed height",labelPosition:"left",value:T,onBlur:e=>{C(Number(e.target.value))}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",label:"Units",labelPosition:"left",value:y,onChange:e=>{N(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"font"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("fieldset",{className:!0===r?"row-height--not-visible":"",children:[(0,_.jsx)("legend",{children:"Set Custom Height"}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Minimum height",labelPosition:"left",value:h,onBlur:e=>{m(e.target.value)}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",labelPosition:"left",label:"Units",value:p,onChange:e=>{w(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]}),(0,_.jsxs)("span",{className:"row-height-span-input",children:[(0,_.jsx)(b.__experimentalNumberControl,{className:"row-height-input",label:"Maximum height",labelPosition:"left",value:g,onBlur:e=>{x(e.target.value)}}),(0,_.jsx)(b.SelectControl,{className:"row-height-unit-input",labelPosition:"left",label:"Units",value:f,onChange:e=>{v(e)},options:[{value:"px",label:"pixels"},{value:"ch",label:"characters"},{value:"pt",label:"points"},{value:"in",label:"inches"},{value:"fr",label:"proportional"}],__nextHasNoMarginBottom:!0})]})]}),(0,_.jsxs)("span",{children:[(0,_.jsx)(b.Button,{variant:"secondary",onClick:o,children:"Cancel"}),(0,_.jsx)(b.Button,{variant:"primary",type:"submit",children:"Update"})]})]})]})})}function ze(e){const[t,l]=(0,i.useState)(!1),[n,o]=(0,i.useState)({}),{tableId:s,rowId:a,rowLabel:r,updatedRow:c}=e;function d(e,n){t?(l(!1),c(e,"attributes",s,a,n)):(e.preventDefault(),l(!0))}return(0,i.useEffect)((()=>{o(e.rowAttributes)}),[e.rowAttributes]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.DropdownMenu,{icon:Ae,defaultOpen:"true",label:r,children:({onClose:e})=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.MenuGroup,{children:(0,_.jsx)(b.MenuItem,{icon:Oe,onClick:d,children:"Update Row Height"})}),!n.isHeader&&(0,_.jsxs)(b.MenuGroup,{children:[(0,_.jsx)(b.MenuItem,{icon:We,onClick:e=>function(e,t){c(e,"insert",s,t,"")}(e,a),children:"Insert Row"}),(0,_.jsx)(b.MenuItem,{icon:Fe,onClick:e=>function(e,t){c(e,"delete",s,t,"")}(e,a),children:"Delete Row"})]})]})}),t&&(0,_.jsx)(Ve,{rowId:a,rowLabel:r,rowAttributes:n,openRowHeight:d})]})}(0,r.dispatch)("core").addEntities([{name:"table",kind:"dynamic-tables",baseURL:"/dynamic-tables/v1/tables",baseURLParams:{context:"edit"},plural:"tables",label:(0,u.__)("Table"),getTitle:e=>e?.title||(0,u.__)("Unnamed Table")}]);const Ge=JSON.parse('{"UU":"dynamic-tables/dynamic-tables"}');(0,a.registerBlockType)(Ge.UU,{apiVersion:3,edit:function(e){const t=(0,h.useBlockProps)({className:"dynamic-table-edit-block"}),{lockPostSaving:l}=(0,r.useDispatch)(c.store),{lockPostAutosaving:n}=(0,r.useDispatch)(c.store),{receiveNewTable:o}=(0,r.useDispatch)(ye),{createTableEntity:s}=(0,r.useDispatch)(ye),{saveTableEntity:a}=(0,r.useDispatch)(ye),{addColumn:m}=(0,r.useDispatch)(ye),{addRow:w}=(0,r.useDispatch)(ye),{removeColumn:g}=(0,r.useDispatch)(ye),{removeRow:x}=(0,r.useDispatch)(ye),{updateTableProp:C}=(0,r.useDispatch)(ye),{updateRow:y}=(0,r.useDispatch)(ye),{updateColumn:N}=(0,r.useDispatch)(ye),{updateCell:S}=(0,r.useDispatch)(ye),{updateTableEntity:E}=(0,r.useDispatch)(ye),{updateTableBorder:R}=(0,r.useDispatch)(ye),{processUnmountedTables:j}=(0,r.useDispatch)(ye),{processDeletedTables:B}=(0,r.useDispatch)(ye),{createNotice:H,removeNotice:P}=(0,r.useDispatch)(d.store),[k,I]=(0,i.useState)(!0),[A,O]=(0,i.useState)(0),[U,L]=(0,i.useState)({}),[D,M]=(0,i.useState)(!1),[W,F]=(0,i.useState)(!1),[V,z]=(0,i.useState)({}),[G,J]=(0,i.useState)(!1),[Y,q]=(0,i.useState)(""),[X,Q]=(0,i.useState)(1),[Z,K]=(0,i.useState)(1),[$,ee]=(0,i.useState)(!1),te=!1,{table_id:le,block_table_ref:ne,block_alignment:oe}=e.attributes,se=(0,h.useSettings)("color.palette"),ae=se[0].map((({color:e,name:t})=>({color:e,name:t}))),{currentTableId:re}=(0,r.useSelect)((e=>{const{getTableIdByBlock:t}=e(ye);return{currentTableId:t(ne)}})),ie=!(!$||Number(re)===Number(le)),{unmountedTables:ce}=(0,r.useSelect)((e=>{const{getUnmountedTables:t}=e(ye);return{unmountedTables:t()}}));Object.keys(ce).length>0&&j(ce);const{deletedTables:de}=(0,r.useSelect)((e=>{const{getDeletedTables:t}=e(ye);return{deletedTables:t()}})),ue=(()=>{const[e,t]=(0,i.useState)(!1),{hasUnsavedChanges:l}=(0,r.useSelect)((e=>({hasUnsavedChanges:e("core/editor").isEditedPostDirty()}))),n=(0,Ne.usePrevious)(l);return(0,i.useEffect)((()=>{!l&&n&&t(!0),l&&t(!1)}),[l,n]),e})();(0,i.useEffect)((()=>{ue&&(Object.keys(de).length>0&&B(de),"new"==me.table_status&&(Qe(me.table_id,"table_status","","PROP","saved"),a(me.table_id)))}),[ue,ce]);const be=""===ne,he=""===ne?"None":"0"===le?"New":k?"Stale":"Saved";be&&(l("lockPostSaving"),n("lockPostAutosaving"));const{table:me,tableStatus:_e,tableHasStartedResolving:pe,tableHasFinishedResolving:we,tableIsResolving:ge}=(0,r.useSelect)((t=>{const{getTable:o,getTableIdByBlock:s,hasStartedResolution:a,hasFinishedResolution:r,isResolving:i}=t(ye),c=[le,k];if(""===ne)return{table:{},tableStatus:"",tableHasStartedResolving:!1,tableHasFinishedResolving:!1,tableIsResolving:!1};const d=((t,a,r)=>{let i=o(t,a);if("0"===t&&""===i.block_table_ref&&$){const t=s(r);i=o(t,a),String(e.context.postId)!==i.post_id&&"0"!==String(e.context.postId)&&Qe(i.table_id,"post_id","","PROP",String(e.context.postId)),ee(!1),l("unlockPostSaving"),n("unlockPostAutosaving"),e.setAttributes({table_id:Number(i.table_id)})}return i})(le,k,ne),u=a("getTable",c),b=r("getTable",c),h=i("getTable",c);return b&&I((()=>!1)),{table:d,tableStatus:d.table_status,tableHasStartedResolving:u,tableHasFinishedResolving:b,tableIsResolving:h}}),[le,ie,k,ne]),xe=(0,i.useRef)(_e);function fe(e,t){const l=e?.[t];return l}xe.current=_e;const ve=fe(me.attributes,"showGridLines"),Te=fe(me.attributes,"allowHorizontalScroll"),Ce=fe(me.attributes,"enableHeaderRow"),Ae=fe(me.attributes,"headerAlignment"),Oe=(fe(me.attributes,"tableHeaderBackgroundColor"),fe(me.attributes,"headerRowSticky")),Ue=fe(me.attributes,"headerBorder"),Le=fe(me.attributes,"bodyAlignment"),De=fe(me.attributes,"bodyBorder"),We=fe(me.attributes,"bandedRows"),Fe=fe(me.attributes,"bandedTextColor"),Ve=fe(me.attributes,"bandedRowBackgroundColor"),Ge=fe(me.attributes,"gridLineWidth"),Je=oe,Ye=(fe(me.attributes,"horizontalAlignment"),fe(me.attributes,"verticalAlignment"),fe(me.attributes,"hideTitle"));pe&&we&&!$&&String(e.context.postId)!==me.post_id&&(Qe(me.table_id,"post_id","","PROP",String(e.context.postId)),a(me.table_id)),(0,i.useEffect)((()=>()=>{Qe(me.table_id,"prior_status","","PROP",xe.current),Qe(me.table_id,"unmounted_blockid","","PROP",t["data-block"],!1)}),[]);const qe="{}"===JSON.stringify(me.table)||"None"==he?0:me.columns.length,Xe="{}"===JSON.stringify(me.table)||"None"==he?0:me.rows.length;function Qe(e,t,l,n,o,s=!0){switch(n){case"CONTENT":"cell"===t&&S(e,l,"content",o);break;case"ATTRIBUTES":"cell"===t?S(e,l,"attributes",o):"row"===t?(z(o),y(e,l,"attributes",o)):"column"===t?(L(o),N(e,l,"attributes",o)):"table"===t&&C(e,"attributes",o);break;case"CLASSES":"cell"===t?S(e,l,"classes",o):"column"===t&&N(e,l,"classes",o);break;case"PROP":C(e,t,o),"unmounted_blockid"===t&&E(e,"unknown")}if(I(!1),s)return E(e)}function Ze(t,l,n){I(!1);const a=Date.now().toString(16),r=function(e,t,l,n){const o=function(e,t){const l=[];let n=1,o=1;for(;o<=t;){for(;n<=e;){if(1==o){const e=Re("0",String(n),String(o));l.push(e)}else{const e=Re("0",String(n),String(o));l.push(e)}n++}n=1,o++}return l}(Number(t),Number(l)),s=[];for(let e=1;e<=l;e++){const t=Se("0",e);s.push(t)}const a=[];for(let e=1;e<=t;e++){const t=Ee("0",e);a.push(t)}return{table:{table_id:"0",block_table_ref:e,post_id:"0",table_status:"new",table_name:n,attributes:je("table"),classes:Be("table"),rows:s,columns:a,cells:o}}}(a,t,l,n);e.setAttributes({block_table_ref:a}),o(r),ee(!0),s()}function Ke(e,t,l,n,o){switch(t){case"attributes":Qe(l,"column",n,"ATTRIBUTES",o);break;case"insert":O(0),M(!1),function(e,t){const l=Ee(e,t),n=[];for(let l=0;l<Z;l++)if(0===l){const o=Re(e,t,l,"Border");n.push(o)}else{const o=Re(e,t,l);n.push(o)}m(e,t,l,n),I(!1),E(e)}(l,n);break;case"delete":O(0),M(!1),function(e,t){g(e,t),I(!1),E(e)}(l,n)}}function $e(e,t,l,n,o){switch(t){case"attributes":Qe(l,"row",n,"ATTRIBUTES",o);break;case"insert":O(0),F(!1),function(e,t){const l=Se(e,t),n=[];for(let l=0;l<X;l++)if(0===l){const o=Re(e,l,t,"Border");n.push(o)}else{const o=Re(e,l,t);n.push(o)}w(e,t,l,n),I(!1),E(e)}(l,n);break;case"delete":O(0),F(!1),function(e,t){x(e,t),I(!1),E(e)}(l,n)}}function et(e,t,l){if("0"===t&&"0"!==e){const t=e,n=l.columns.find((({column_id:e})=>e===t));L(n.attributes),M(!0),O(e)}if("0"!==t&&"0"===e){const e=t,n=l.rows.find((({row_id:t})=>t===e));z(n.attributes),F(!0),O(t)}I(!1)}function tt(e,t,l){let n="";"background"==t&&(n={...e.attributes,bandedRowBackgroundColor:l},Qe(e.table_id,"table","","ATTRIBUTES",n)),"text"==t&&(n={...e.attributes,bandedTextColor:l},Qe(e.table_id,"table","","ATTRIBUTES",n))}(0,i.useEffect)((()=>{be||(qe!=X&&Q(qe),Xe!=Z&&K(Xe))}),[qe,Xe]);const lt=function(e,t,l,n){if(e||t)return;let o="";return n.map((({column_id:e,column_name:t,attributes:l,classes:n})=>{const{columnWidthType:s,minWidth:a,minWidthUnits:r,maxWidth:i,maxWidthUnits:c,fixedWidth:d,fixedWidthUnits:u,disableForTablet:b,disableForPhone:h}=l;let m="";switch(s){case"Proportional":m=a>0?"minmax("+a+r+", "+i+"fr) ":i+"fr ",o+=m;break;case"Auto":o+="auto ";break;case"Fixed":o=o+d+u+" ";break;case"Custom":m="minmax("+a+r+", "+i+c+") ",o+=m}})),o}(be,ge,0,me.columns),nt=function(e,t,l){if(e||t)return;let n="";return l.map((({row_id:e,attributes:t,classes:l})=>{const{rowHeightType:o,minHeight:s,minHeightUnits:a,maxHeight:r,maxHeightUnits:i,fixedHeight:c,fixedHeightUnits:d,isHeader:u}=t;let b="";if(u)switch(o){case"Auto":n+="auto ";break;case"Fixed":n=n+c+d+" ";break;case"Custom":b="minmax("+s+a+", "+r+i+") ",n+=b}})),n}(be,ge,me.rows),ot=function(e,t,l){if(e||t)return;let n="";return l.map((({row_id:e,attributes:t,classes:l})=>{const{rowHeightType:o,minHeight:s,minHeightUnits:a,maxHeight:r,maxHeightUnits:i,fixedHeight:c,fixedHeightUnits:d,isHeader:u}=t;let b="";if(!u)switch(o){case"Auto":n+="auto ";break;case"Fixed":n=n+c+d+" ";break;case"Custom":b="minmax("+s+a+", "+r+i+") ",n+=b}})),n}(be,ge,me.rows),st=G?2:1,at=He(1,"Header",Z,Ce,G,!1),rt=function(e,t){let l=1;return l=e?l+1:l,l=t?l+1:l,l}(Ce,G),it=He(rt,"Body",Z,Ce,G,!1),ct=Te?"auto":"hidden",dt=function(e,t,l){if(!e&&!t)return l}(be,ge,Fe),ut=function(e,t,l){if(!e&&!t)return l}(be,ge,Ve),bt=function(e,t,l){if(!e&&!t)return l?"solid":"hidden"}(be,ge,ve),ht=function(e,t,l,n){if(!e&&!t)return l?String(n)+"px":"0px"}(be,ge,ve,Ge),mt=Oe?"auto":"hidden",_t=Oe?"grid-control__header--sticky ":"",pt=(t.style.backgroundColor,Pe(be,ge,Ae)),wt=ke(Ue),gt=Ie(Ue,"top","color",wt),xt=Ie(Ue,"top","style",wt),ft=Ie(Ue,"top","width",wt),vt=Ie(Ue,"right","color",wt),Tt=Ie(Ue,"right","style",wt),Ct=Ie(Ue,"right","width",wt),yt=Ie(Ue,"bottom","color",wt),Nt=Ie(Ue,"bottom","style",wt),St=Ie(Ue,"bottom","width",wt),Et=Ie(Ue,"left","color",wt),Rt=Ie(Ue,"left","style",wt),jt=Ie(Ue,"left","width",wt),Bt=Pe(be,ge,Le),Ht=ke(De),Pt=Ie(De,"top","color",Ht),kt=Ie(De,"top","style",Ht),It=Ie(De,"top","width",Ht),At=Ie(De,"right","color",Ht),Ot=Ie(De,"right","style",Ht),Ut=Ie(De,"right","width",Ht),Lt=Ie(De,"bottom","color",Ht),Dt=Ie(De,"bottom","style",Ht),Mt=Ie(De,"bottom","width",Ht),Wt=Ie(De,"left","color",Ht),Ft=Ie(De,"left","style",Ht),Vt=Ie(De,"left","width",Ht);return(0,_.jsxs)("div",{...t,children:[!be&&!ge&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(h.BlockControls,{children:(0,_.jsx)(h.BlockAlignmentToolbar,{value:oe,onChange:t=>e.setAttributes({block_alignment:t})})}),(0,_.jsx)(h.InspectorControls,{children:(0,_.jsxs)(b.Panel,{children:[(0,_.jsxs)(b.PanelBody,{title:"Definition",initialOpen:!0,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("div",{className:"grid-control__inspector-controls--read-only",children:[(0,_.jsx)("span",{className:"grid-control__inspector-controls--read-only-label",children:"Table Name:"}),(zt=me.table_name,null!==zt&&""!==zt&&(zt=zt.toString()).replace(/(<([^>]+)>)/gi,""))]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("div",{className:"grid-control__inspector-controls--read-only",children:[(0,_.jsx)("span",{className:"grid-control__inspector-controls--read-only-label",children:"Table Columns/Rows:"}),X,"/",Z]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Show table borders",__nextHasNoMarginBottom:!0,checked:G,onChange:e=>function(e,t){let l,n,o;if(!1===t)Q(X-1),K(Z-1),l=e.rows.filter((e=>"0"!==e.row_id)),n=e.columns.filter((e=>"0"!==e.column_id)),o=e.cells.filter((e=>"0"!==e.row_id&&"0"!==e.column_id)),R(e.table_id,l,n,o);else{Q(X+1),K(Z+1);const t=[];t.push(Se(le,0,"Border"));const s=[];for(let e=0;e<=X;e++){const t=Re(le,e,0,"Border");s.push(t)}const a=[];a.push(Ee(le,0,"Border"));const r=[];for(let e=1;e<=Z;e++){const t=Re(le,0,e,"Border");r.push(t)}l=f("rows",[...e.rows,...t]),n=f("columns",[...e.columns,...a]),o=f("cells",[...e.cells,...s,...r]),R(e.table_id,l,n,o)}J(t),I(!1)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Hide Table Title",__nextHasNoMarginBottom:!0,checked:Ye,onChange:e=>function(e,t){const l={...e.attributes,hideTitle:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]}),(0,_.jsxs)(b.PanelBody,{title:"Table Header",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"First Row as Header?",__nextHasNoMarginBottom:!0,checked:Ce,onChange:e=>function(e,t){const l={...e.attributes,enableHeaderRow:t,headerRowSticky:!1};Qe(e.table_id,"table","","ATTRIBUTES",l);const n={...e.rows.find((e=>"1"===e.row_id)).attributes,isHeader:!!t};Qe(e.table_id,"row","1","ATTRIBUTES",n)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Freeze Header Row?",__nextHasNoMarginBottom:!0,disabled:!Ce,checked:Oe,onChange:e=>function(e,t){const l={...e.attributes,headerRowSticky:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("span",{className:"inspector-controls-menu__header-alignment--middle",children:[(0,_.jsx)(h.AlignmentControl,{id:"header-alignment",value:Ae,onChange:e=>function(e,t){const l={...e.attributes,headerAlignment:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)}),(0,_.jsx)("label",{className:"inspector-controls-nemu__label--left-margin",htmlFor:"header-alignment",children:"Text Alignment"})]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.BorderBoxControl,{className:"border-box-workaround",__next40pxDefaultSize:!0,__experimentalIsRenderedInSidebar:!0,label:"Borders",isCompact:"true",colors:ae,value:Ue,onChange:e=>function(e,t){const l={...e.attributes,headerBorder:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]}),(0,_.jsxs)(b.PanelBody,{title:"Table Body",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Allow Horizontal Acroll?",__nextHasNoMarginBottom:!0,checked:Te,onChange:e=>function(e,t){const l={...e.attributes,allowHorizontalScroll:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsxs)("span",{className:"inspector-controls-menu__header-alignment--middle",children:[(0,_.jsx)(h.AlignmentControl,{id:"body-alignment",value:Le,onChange:e=>function(e,t){const l={...e.attributes,bodyAlignment:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)}),(0,_.jsx)("label",{className:"inspector-controls-menu__label--left-margin",htmlFor:"body-alignment",children:"Text Alignment"})]})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.BorderBoxControl,{className:"border-box-workaround",label:"Borders",hideLabelFromVision:"false",isCompact:"true",colors:ae,value:De,onChange:e=>function(e,t){const l={...e.attributes,bodyBorder:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]})]})}),(0,_.jsxs)(h.InspectorControls,{group:"styles",children:[(0,_.jsxs)(b.PanelBody,{title:"Banded Table Rows",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Display Banded Rows",__nextHasNoMarginBottom:!0,checked:We,onChange:e=>function(e,t){const l={...e.attributes,bandedRows:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(h.PanelColorSettings,{__experimentalIsRenderedInSidebar:!0,title:"Banded Row Color",colors:se,colorSettings:[{value:Fe,onChange:e=>tt(me,"text",e),label:"Text"},{value:Ve,onChange:e=>tt(me,"background",e),label:"Background"}]})]}),(0,_.jsxs)(b.PanelBody,{title:"Grid Lines",initialOpen:!1,children:[(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.CheckboxControl,{label:"Display Inner Grid Lines",__nextHasNoMarginBottom:!0,checked:ve,onChange:e=>function(e,t){const l={...e.attributes,showGridLines:t};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})}),(0,_.jsx)(b.PanelRow,{children:(0,_.jsx)(b.__experimentalNumberControl,{label:"Inner Grid Line Width",value:Ge,labelPosition:"side",onChange:e=>function(e,t){const l={...e.attributes,gridLineWidth:Number(t)};Qe(e.table_id,"table","","ATTRIBUTES",l)}(me,e)})})]})]}),(0,_.jsx)(h.InspectorControls,{group:"typography"}),(0,_.jsxs)("div",{style:{display:"block"},children:[!Ye&&(0,_.jsx)(h.RichText,{id:"tableTitle",style:{"--gridAlignment":Je},tagName:"p",allowedFormats:["core/bold","core/italic"],onChange:e=>Qe(le,"table_name","","PROP",e),value:me.table_name}),(0,_.jsx)(b.TabbableContainer,{children:(0,_.jsx)("div",{className:"grid-scroller",style:{"--headerRowSticky":mt},children:(0,_.jsxs)("div",{className:"grid-control "+_t,style:{"--gridTemplateColumns":lt,"--horizontalScroll":ct,"--headerRowSticky":mt,"--gridNumColumns":X,"--gridNumRows":Z,"--gridAlignment":Je},children:[G&&(0,_.jsx)("div",{className:"grid-control__border",children:me.cells.filter((e=>e.attributes.border&&"0"===e.row_id)).map((({table_id:e,row_id:t,column_id:l,cell_id:n,content:o,classes:s})=>{const a=v(t,l,o),r=function(e,t,l){return!(!e||t!==l)}(D,A,l),i="1"===l;return(0,_.jsxs)(_.Fragment,{children:[i&&te,(0,_.jsxs)("div",{id:n,onMouseDown:e=>et(l,t,me),className:s,children:[a,r&&(0,_.jsx)(Me,{tableId:e,columnId:l,columnLabel:a,columnAttributes:U,enableProFeatures:!1,updatedColumn:Ke})]})]})}))}),me.rows.filter((e=>!0===e.attributes.isHeader)).map((({row_id:e})=>{const t=e;return(0,_.jsx)("div",{className:"grid-control__header",style:{"--gridTemplateHeaderRows":nt,"--startGridHeaderRowNbr":st,"--endGridHeaderRowNbr":at,"--headerBorderTopColor":gt,"--headerBorderTopStyle":xt,"--headerBorderTopWidth":ft,"--headerBorderRightColor":vt,"--headerBorderRightStyle":Tt,"--headerBorderRightWidth":Ct,"--headerBorderBottomColor":yt,"--headerBorderBottomStyle":Nt,"--headerBorderBottomWidth":St,"--headerBorderLeftColor":Et,"--headerBorderLeftStyle":Rt,"--headerBorderLeftWidth":jt,"--headerTextAlignment":pt},children:me.cells.filter((e=>e.row_id===t)).map((({table_id:e,row_id:t,column_id:l,cell_id:n,content:o,attributes:s,classes:a})=>{const r="1"===l,i=s.border,c=v(t,l,o),d=T(W,A,t),u=bt,b=ht;return(0,_.jsxs)(_.Fragment,{children:[r&&i&&te,i&&(0,_.jsxs)("div",{id:n,onMouseDown:e=>et(l,t,me),className:a,children:[c,d&&(0,_.jsx)(ze,{tableId:e,rowId:t,rowLabel:c,rowAttributes:V,updatedRow:$e})]}),r&&te,!i&&(0,_.jsx)(h.RichText,{id:n,className:"grid-control__header-cells",style:{"--showGridLines":u,"--gridLineWidth":b},tabIndex:"0",tagName:"div",onChange:t=>Qe(e,"cell",n,"CONTENT",t),value:o})]})}))})})),(0,_.jsx)("div",{className:"grid-control__body",style:{"--gridTemplateBodyRows":ot,"--startGridBodyRowNbr":rt,"--endGridBodyRowNbr":it,"--bodyBorderTopColor":Pt,"--bodyBorderTopStyle":kt,"--bodyBorderTopWidth":It,"--bodyBorderRightColor":At,"--bodyBorderRightStyle":Ot,"--bodyBorderRightWidth":Ut,"--bodyBorderBottomColor":Lt,"--bodyBorderBottomStyle":Dt,"--bodyBorderBottomWidth":Mt,"--bodyBorderLeftColor":Wt,"--bodyBorderLeftStyle":Ft,"--bodyBorderLeftWidth":Vt,"--bodyTextAlignment":Bt},children:me.rows.filter((e=>!0!==e.attributes.isHeader&&"0"!==e.row_id)).map((({row_id:e})=>{const t=e;let l="";const n=Ce?1:0;return We&&0==n&&Number(e)%2==0&&(l+="grid-control__body-rows--banded-row "),We&&1==n&&Number(e)>1&&(Number(e)+n)%2==0&&(l+="grid-control__body-rows--banded-row "),(0,_.jsx)("div",{className:"grid-control__body-row "+l,style:{"--bandedRowTextColor":dt,"--bandedRowBackgroundColor":ut},children:me.cells.filter((e=>e.row_id===t)).map((({table_id:e,row_id:t,column_id:l,cell_id:n,content:o,attributes:s,classes:a})=>{const r="1"===l,i=s.border,c=v(t,l,o),d=T(W,A,t),u=bt,b=ht;return(0,_.jsxs)(_.Fragment,{children:[r&&i&&te,i&&(0,_.jsxs)("div",{id:n,onMouseDown:e=>et(l,t,me),className:a,children:[c,d&&(0,_.jsx)(ze,{tableId:e,rowId:t,rowLabel:c,rowAttributes:V,updatedRow:$e})]}),r&&!i&&te,!i&&(0,_.jsx)(h.RichText,{id:n,className:"grid-control__body-cells "+a,style:{"--showGridLines":u,"--gridLineWidth":b},tabIndex:"0",tagName:"div",onChange:t=>Qe(e,"cell",n,"CONTENT",t),value:o})]})}))})}))})]})})})]})]}),!be&&ge&&(0,_.jsx)(b.Spinner,{children:"Retrieving Table Data"}),be&&(0,_.jsx)(b.Placeholder,{label:(0,u.__)("Dynamic Table"),icon:(0,_.jsx)(h.BlockIcon,{icon:p,showColors:!0}),instructions:(0,u.__)("Create a new dynamic table."),children:(0,_.jsxs)("form",{className:"blocks-table__placeholder-form",onSubmit:function(e){e.preventDefault(),Ze(X,Z,Y)},children:[(0,_.jsx)(b.__experimentalInputControl,{label:(0,u.__)("Table Name"),placeholder:"New Table",required:"true",onChange:e=>q(e),value:Y,className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.__experimentalNumberControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Table Columns"),min:1,required:"true",value:X,onChange:e=>function(e){let t=e;e<1||e>50?(H("error","Cannot have "+e+" columns.  You must have at least 1 and no more than 50 columns.",{id:"invalidNumColumns",isDismissible:!0,politeness:"assertive"}),t=Number(X)):P("invalidNumColumns"),Q(t)}(e),className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.__experimentalNumberControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Table Rows"),required:"true",min:1,value:Z,onChange:e=>function(e){let t=e;e<1||e>1e3?(H("error","Cannot have "+e+" rows.  You must have at least 1 and no more than 1,000 rows.",{id:"invalidNumRows",isDismissible:!0,politeness:"assertive"}),t=Number(Z)):P("invalidNumRows"),K(t)}(e),className:"blocks-table__placeholder-input"}),(0,_.jsx)(b.Button,{className:"blocks-table__placeholder-button",variant:"primary",type:"submit",children:(0,u.__)("Create Table")})]})})]});var zt},save:e=>null})}},l={};function n(e){var o=l[e];if(void 0!==o)return o.exports;var s=l[e]={exports:{}};return t[e](s,s.exports,n),s.exports}n.m=t,e=[],n.O=(t,l,o,s)=>{if(!l){var a=1/0;for(d=0;d<e.length;d++){for(var[l,o,s]=e[d],r=!0,i=0;i<l.length;i++)(!1&s||a>=s)&&Object.keys(n.O).every((e=>n.O[e](l[i])))?l.splice(i--,1):(r=!1,s<a&&(a=s));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,o,s]},n.d=(e,t)=>{for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,l)=>{var o,s,[a,r,i]=l,c=0;if(a.some((t=>0!==e[t]))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(i)var d=i(n)}for(t&&t(l);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},l=globalThis.webpackChunkdynamic_tables=globalThis.webpackChunkdynamic_tables||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var o=n.O(void 0,[350],(()=>n(665)));o=n.O(o)})();